<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš½ ìŠ¤í‚¤ë¹„ë”” íƒ€ì ë””íœìŠ¤ - ì´ˆë“±í•™ìƒ íƒ€ìì—°ìŠµ ê²Œì„</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Jua', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        .stars {
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
        }

        .star {
            position: absolute;
            background: white;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1); }
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 1200px;
            width: 95%;
            z-index: 10;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .game-header {
            text-align: center;
            margin-bottom: 15px;
            position: relative;
        }

        .main-game-layout {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }

        .left-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-width: 180px;
        }

        .right-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-width: 180px;
        }

        .center-game {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .game-title {
            font-size: 28px;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4, #45B7D1, #96CEB4);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 3s ease infinite;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 10px;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }

        .stat-box:hover {
            transform: translateY(-3px);
        }

        .stat-icon {
            font-size: 24px;
        }

        .game-area {
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 50%, #C9E4FF 100%);
            border-radius: 15px;
            height: 500px; /* ê²Œì„ ì˜ì—­ ë†’ì´ë¥¼ ëŒ€í­ ì¦ê°€ (350px â†’ 500px) */
            width: 100%;
            min-width: 600px;
            position: relative;
            overflow: visible;
            border: 3px solid #4ECDC4;
            margin-bottom: 15px;
        }

        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 70px;
            background: linear-gradient(to bottom, #8FBC8F 0%, #556B2F 100%);
            border-top: 3px solid #3CB371;
            z-index: 1;
        }

        .castle {
            position: absolute;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 80px;
            background: linear-gradient(to bottom, #FFE4B5 0%, #DEB887 100%);
            border-radius: 10px 10px 0 0;
            border: 3px solid #CD853F;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .castle::before {
            content: 'ğŸ°';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
            transition: all 0.3s ease;
        }

        /* ì„± ìƒíƒœë³„ ìŠ¤íƒ€ì¼ - ë” ë””í…Œì¼í•œ íš¨ê³¼ */
        .castle.damaged-1 {
            background: linear-gradient(135deg, #F4A460 0%, #CD853F 50%, #A0522D 100%);
            border-color: #8B4513;
            border-style: dashed;
            animation: castle-shake-1 2s infinite;
            box-shadow: inset 0 0 20px rgba(139, 69, 19, 0.5);
        }

        .castle.damaged-1::before {
            content: 'ğŸšï¸';
            filter: sepia(0.3) brightness(0.9);
        }

        .castle.damaged-1::after {
            content: 'ğŸ’¨';
            position: absolute;
            top: -10px;
            right: 5px;
            font-size: 20px;
            animation: smoke-rise 3s infinite;
        }

        .castle.damaged-2 {
            background: linear-gradient(135deg, #CD853F 0%, #8B4513 50%, #654321 100%);
            border-color: #654321;
            border-style: dotted;
            height: 65px;
            animation: castle-shake-2 1.5s infinite;
            box-shadow: inset 0 0 30px rgba(101, 67, 33, 0.7), 0 0 15px rgba(255, 69, 0, 0.4);
            transform: translateX(-50%) rotate(-2deg);
        }

        .castle.damaged-2::before {
            content: 'ğŸ’¥';
            font-size: 32px;
            animation: explosion-pulse 1s infinite;
            filter: brightness(1.2) contrast(1.1);
        }

        .castle.damaged-2::after {
            content: 'ğŸ”¥';
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 15px;
            animation: fire-flicker 0.8s infinite;
        }

        .castle.damaged-3 {
            background: linear-gradient(135deg, #8B4513 0%, #654321 50%, #2F1B14 100%);
            border-color: #2F1B14;
            border-style: solid;
            border-width: 2px;
            height: 50px;
            opacity: 0.7;
            animation: castle-collapse 2s infinite;
            box-shadow: inset 0 0 40px rgba(47, 27, 20, 0.9), 0 0 25px rgba(255, 0, 0, 0.6);
            transform: translateX(-50%) rotate(-5deg) scale(0.9);
        }

        .castle.damaged-3::before {
            content: 'ğŸ”¥';
            font-size: 28px;
            animation: final-fire 0.5s infinite;
            filter: brightness(1.5) saturate(2);
        }

        .castle.damaged-3::after {
            content: 'ğŸ’€';
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 12px;
            animation: skull-glow 1s infinite;
        }

        /* ì„± íŒŒê´´ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes castle-shake-1 {
            0%, 100% { transform: translateX(-50%) translateY(0px); }
            25% { transform: translateX(-50%) translateY(-1px); }
            75% { transform: translateX(-50%) translateY(1px); }
        }

        @keyframes castle-shake-2 {
            0%, 100% { transform: translateX(-50%) rotate(-2deg) translateY(0px); }
            50% { transform: translateX(-50%) rotate(-2deg) translateY(-2px); }
        }

        @keyframes castle-collapse {
            0%, 100% { transform: translateX(-50%) rotate(-5deg) scale(0.9) translateY(0px); }
            50% { transform: translateX(-50%) rotate(-5deg) scale(0.85) translateY(2px); }
        }

        @keyframes smoke-rise {
            0% { opacity: 1; transform: translateY(0px); }
            100% { opacity: 0; transform: translateY(-20px); }
        }

        @keyframes explosion-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes fire-flicker {
            0%, 100% { opacity: 1; transform: rotate(0deg); }
            50% { opacity: 0.7; transform: rotate(5deg); }
        }

        @keyframes final-fire {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.2) rotate(10deg); opacity: 0.8; }
        }

        @keyframes skull-glow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* ì„± íŒŒê´´ íŒŒí‹°í´ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes castle-particle-light {
            0% {
                opacity: 1;
                transform: scale(1) rotate(0deg) translateY(0px);
            }
            100% {
                opacity: 0;
                transform: scale(0.5) rotate(360deg) translateY(-40px) translateX(20px);
            }
        }

        @keyframes castle-particle-medium {
            0% {
                opacity: 1;
                transform: scale(1) rotate(0deg) translateY(0px);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.2) rotate(180deg) translateY(-20px) translateX(30px);
            }
            100% {
                opacity: 0;
                transform: scale(0.3) rotate(360deg) translateY(-60px) translateX(-20px);
            }
        }

        @keyframes castle-particle-heavy {
            0% {
                opacity: 1;
                transform: scale(1) rotate(0deg) translateY(0px);
            }
            25% {
                opacity: 1;
                transform: scale(1.5) rotate(90deg) translateY(-15px) translateX(40px);
            }
            75% {
                opacity: 0.6;
                transform: scale(0.8) rotate(270deg) translateY(-50px) translateX(-30px);
            }
            100% {
                opacity: 0;
                transform: scale(0.2) rotate(720deg) translateY(-80px) translateX(10px);
            }
        }

        /* íŒŒì›Œì—… ìŠ¤íƒ€ì¼ */
        .powerup {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 25px;
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s ease;
            animation: powerup-glow 2s infinite, powerup-float 3s infinite;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
        }

        .powerup:hover {
            transform: scale(1.1);
        }

        .powerup.time-freeze {
            background: linear-gradient(135deg, #87CEEB, #4682B4);
        }

        .powerup.slow-motion {
            background: linear-gradient(135deg, #98FB98, #32CD32);
        }

        .powerup.double-score {
            background: linear-gradient(135deg, #FFD700, #FFA500);
        }

        .powerup.shield {
            background: linear-gradient(135deg, #DDA0DD, #9370DB);
        }

        @keyframes powerup-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.8); }
            50% { box-shadow: 0 0 30px rgba(255, 255, 255, 1); }
        }

        @keyframes powerup-float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* íŒŒì›Œì—… UI í‘œì‹œ */
        .active-powerups {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .active-powerup {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            animation: powerup-active 0.3s ease-in;
        }

        @keyframes powerup-active {
            0% { opacity: 0; transform: translateX(50px); }
            100% { opacity: 1; transform: translateX(0px); }
        }

        /* í™”ë©´ íš¨ê³¼ */
        .screen-effect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        .screen-effect.time-freeze {
            background: radial-gradient(circle, rgba(135, 206, 235, 0.3) 0%, rgba(70, 130, 180, 0.1) 100%);
            animation: time-freeze-effect 0.5s ease-in-out infinite alternate;
        }

        .screen-effect.slow-motion {
            background: radial-gradient(circle, rgba(152, 251, 152, 0.2) 0%, rgba(50, 205, 50, 0.1) 100%);
        }

        .screen-effect.double-score {
            background: radial-gradient(circle, rgba(255, 215, 0, 0.3) 0%, rgba(255, 165, 0, 0.1) 100%);
            animation: double-score-effect 1s ease-in-out infinite;
        }

        @keyframes time-freeze-effect {
            0% { opacity: 0.3; }
            100% { opacity: 0.1; }
        }

        @keyframes double-score-effect {
            0% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.1; transform: scale(1.02); }
            100% { opacity: 0.3; transform: scale(1); }
        }

        /* íŒŒì›Œì—… ë‹¨ì–´ ê¸€ë¡œìš° ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes powerup-word-glow {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 8px 20px rgba(0,0,0,0.4), inset 0 2px 4px rgba(255,255,255,0.3), 0 0 25px currentColor;
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 10px 25px rgba(0,0,0,0.5), inset 0 2px 4px rgba(255,255,255,0.4), 0 0 35px currentColor;
            }
        }

        /* íŒŒì›Œì—… íšë“ ë©”ì‹œì§€ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes powerup-message {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.3);
            }
            20% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1);
            }
            30% {
                transform: translate(-50%, -50%) scale(1);
            }
            90% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
        }

        .word-enemy {
            position: absolute;
            padding: 8px 15px;
            background: #FFD700;
            border-radius: 15px;
            border: 3px solid #FF6B6B;
            font-size: 22px;
            font-weight: bold;
            color: #000;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            z-index: 100;
            min-width: 80px;
            text-align: center;
            display: block;
            visibility: visible;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .word-enemy.correct {
            background: #4ECDC4;
            border-color: #45B7D1;
            animation: explode 0.5s ease;
        }

        @keyframes explode {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.5) rotate(180deg); }
            100% { transform: scale(0) rotate(360deg); opacity: 0; }
        }

        .input-area {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        #gameInput {
            padding: 18px 30px;
            font-size: 26px;
            border: 4px solid #4ECDC4;
            border-radius: 20px;
            width: 400px;
            text-align: center;
            background: white;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(78, 205, 196, 0.2);
        }

        #gameInput:focus {
            outline: none;
            border-color: #45B7D1;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.3);
        }

        .control-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .game-btn {
            padding: 12px 30px;
            font-size: 20px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .start-btn {
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            color: white;
        }

        .pause-btn {
            background: linear-gradient(135deg, #FFE66D 0%, #FF6B6B 100%);
            color: white;
        }

        .sound-btn {
            background: linear-gradient(135deg, #A8E6CF 0%, #7FCDCD 100%);
            color: white;
        }

        .game-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .game-btn:active {
            transform: translateY(0);
        }

        .character-select {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .character {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            border: 3px solid #ccc;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            background: white;
        }

        .character.selected {
            border-color: #4ECDC4;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(78, 205, 196, 0.5);
        }

        .character.locked {
            opacity: 0.5;
            cursor: not-allowed;
            position: relative;
        }

        .character.locked::after {
            content: 'ğŸ”’';
            position: absolute;
            font-size: 20px;
            bottom: -5px;
            right: -5px;
        }

        .combo-display {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
            color: #FF6B6B;
            font-weight: bold;
            display: none;
        }

        .combo-display.show {
            display: block;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.5); }
        }

        .particle {
            position: absolute;
            pointer-events: none;
            animation: particle-float 1s ease-out forwards;
        }

        @keyframes particle-float {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-50px) scale(0);
            }
        }

        .game-over-modal, .pause-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-title {
            font-size: 36px;
            margin-bottom: 20px;
            color: #FF6B6B;
        }

        .modal-score {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .leaderboard {
            background: #f0f0f0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            max-height: 200px;
            overflow-y: auto;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 10px;
        }

        .rank-medal {
            font-size: 20px;
        }

        /* ëª¨ë°”ì¼ ëŒ€ì‘ */
        @media (max-width: 768px) {
            .game-container {
                padding: 15px;
                max-width: 100%;
            }

            .main-game-layout {
                flex-direction: column;
                gap: 15px;
            }

            .left-controls, .right-controls {
                min-width: auto;
                width: 100%;
            }

            .game-title {
                font-size: 24px;
            }

            .game-area {
                height: 300px;
                width: 100%;
            }

            #gameInput {
                width: 90%;
                max-width: 300px;
                font-size: 20px;
                padding: 15px 20px;
            }

            .game-btn {
                padding: 12px 20px;
                font-size: 16px;
                width: 100%;
            }

            .stat-box {
                font-size: 14px;
                padding: 8px 12px;
            }

            .word-enemy {
                font-size: 16px;
            }

            .character-select {
                justify-content: center;
            }

            .character {
                width: 45px;
                height: 45px;
                font-size: 24px;
            }
        }

        .mobile-keyboard {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .keyboard-row {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 5px 0;
        }

        .key-btn {
            padding: 10px;
            min-width: 30px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .key-btn:active {
            background: #4ECDC4;
            color: white;
            transform: scale(0.95);
        }

        .key-space {
            min-width: 150px;
        }

        .key-backspace {
            min-width: 60px;
        }

        @media (max-width: 768px) {
            .mobile-keyboard {
                display: block;
            }
        }
    </style>
</head>
<body>
<div class="stars" id="stars"></div>

<div class="game-container">
    <div class="game-header">
        <h1 class="game-title">ğŸš½ ìŠ¤í‚¤ë¹„ë”” íƒ€ì ë””íœìŠ¤ ğŸ®</h1>
    </div>

    <div class="game-stats">
        <div class="stat-box">
            <span class="stat-icon">ğŸ’¯</span>
            <span>ì ìˆ˜: <span id="score">0</span></span>
        </div>
        <div class="stat-box">
            <span class="stat-icon">âš¡</span>
            <span>ë ˆë²¨: <span id="level">1</span></span>
        </div>
        <div class="stat-box">
            <span class="stat-icon">â¤ï¸</span>
            <span>ìƒëª…: <span id="lives">3</span></span>
        </div>
        <div class="stat-box">
            <span class="stat-icon">ğŸª™</span>
            <span>ì½”ì¸: <span id="coins">0</span></span>
        </div>
        <div class="stat-box">
            <span class="stat-icon">ğŸ”¥</span>
            <span>ì½¤ë³´: <span id="combo">0</span></span>
        </div>
        <div class="stat-box">
            <span class="stat-icon">âš¡</span>
            <span>ì†ë„: <span id="speed">1.0x</span></span>
        </div>
    </div>

    <div class="main-game-layout">
        <!-- ì™¼ìª½ ì»¨íŠ¸ë¡¤ -->
        <div class="left-controls">
            <h3 style="color: #333; margin-bottom: 10px; text-align: center;">ğŸ® ê²Œì„ ì„¤ì •</h3>

            <button class="game-btn start-btn" id="startBtn">ğŸ® ê²Œì„ ì‹œì‘</button>
            <button class="game-btn pause-btn" id="pauseBtn">â¸ï¸ ì¼ì‹œì •ì§€</button>
            <button class="game-btn sound-btn" id="soundBtn">ğŸ”Š ì†Œë¦¬ ON</button>

            <h4 style="color: #333; margin: 15px 0 8px 0; text-align: center;">ğŸ“ ì¶œì œ ë°©ì‹</h4>
            <div style="background: rgba(255,255,255,0.9); border-radius: 10px; padding: 10px; margin-bottom: 10px;">
                <label style="display: block; margin: 5px 0; color: #333; font-size: 14px;">
                    <input type="radio" name="wordType" value="words" checked style="margin-right: 5px;">
                    ğŸ“š ë‹¨ì–´ ìœ„ì£¼
                </label>
                <label style="display: block; margin: 5px 0; color: #333; font-size: 14px;">
                    <input type="radio" name="wordType" value="sentences" style="margin-right: 5px;">
                    ğŸ“– ë¬¸ì¥ ìœ„ì£¼
                </label>
            </div>

            <h4 style="color: #333; margin: 15px 0 8px 0; text-align: center;">âš¡ ì†ë„ ì¡°ì ˆ</h4>
            <button class="game-btn" id="speedDownBtn" style="background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);">ğŸŒ ëŠë¦¬ê²Œ</button>
            <div style="padding: 8px; background: rgba(255,255,255,0.8); border-radius: 10px; text-align: center; color: #333; font-weight: bold;">
                ì†ë„: <span id="speedDisplay">1.0x</span>
            </div>
            <button class="game-btn" id="speedUpBtn" style="background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);">ğŸš€ ë¹ ë¥´ê²Œ</button>

            <h4 style="color: #333; margin: 15px 0 8px 0; text-align: center;">ğŸ® ì¡°ì‘ë²•</h4>
            <div style="background: rgba(255,255,255,0.9); border-radius: 10px; padding: 12px; margin-bottom: 10px; font-size: 13px; color: #333;">
                <div style="margin-bottom: 8px;">
                    âŒ¨ï¸ <strong>íƒ€ì´í•‘:</strong> ë‹¨ì–´ë¥¼ ì •í™•íˆ ì…ë ¥
                </div>
                <div style="margin-bottom: 8px;">
                    ğŸ’£ <strong>í­íƒ„:</strong> SPACEí‚¤ (ì „ì²´ ë‹¨ì–´ ì œê±°)
                </div>
                <div style="margin-bottom: 8px;">
                    ğŸ‘¹ <strong>ë³´ìŠ¤:</strong> ê°™ì€ ë‹¨ì–´ë¥¼ ì—¬ëŸ¬ ë²ˆ ì…ë ¥
                </div>
                <div>
                    â¸ï¸ <strong>ì¼ì‹œì •ì§€:</strong> ESCí‚¤
                </div>
            </div>
        </div>

        <!-- ì¤‘ì•™ ê²Œì„ ì˜ì—­ -->
        <div class="center-game">
            <div class="game-area" id="gameArea">
                <div class="combo-display" id="comboDisplay"></div>
                <div class="castle"></div>
                <div class="ground"></div>
            </div>

            <div class="input-area">
                <input type="text" id="gameInput" placeholder="ë‹¨ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”!" autocomplete="off" disabled>
            </div>
        </div>

        <!-- ì˜¤ë¥¸ìª½ ì»¨íŠ¸ë¡¤ -->
        <div class="right-controls">
            <h3 style="color: #333; margin-bottom: 10px; text-align: center;">ğŸ‘¤ ìºë¦­í„° ì„ íƒ</h3>

            <div class="character-select">
                <div class="character selected" data-char="ğŸ˜">ğŸ˜</div>
                <div class="character" data-char="ğŸ¤–">ğŸ¤–</div>
                <div class="character locked" data-char="ğŸ¦„">ğŸ¦„</div>
                <div class="character locked" data-char="ğŸ‰">ğŸ‰</div>
            </div>

            <h4 style="color: #333; margin: 15px 0 8px 0; text-align: center;">ğŸ“– ì¡°ì‘ë²•</h4>
            <div style="background: rgba(255,255,255,0.8); border-radius: 10px; padding: 12px; font-size: 12px; color: #333;">
                <div><strong>í‚¤ë³´ë“œ:</strong></div>
                <div>â€¢ Enter: ë‹¨ì–´ ì…ë ¥</div>
                <div>â€¢ ESC: ì¼ì‹œì •ì§€</div>
                <div><br><strong>íŒŒì›Œì—…:</strong></div>
                <div>â° íŒŒë€ìƒ‰: ì‹œê°„ì •ì§€</div>
                <div>ğŸŒ ì´ˆë¡ìƒ‰: ìŠ¬ë¡œìš°ëª¨ì…˜</div>
                <div>ğŸ’ ê¸ˆìƒ‰: ë”ë¸”ìŠ¤ì½”ì–´</div>
                <div>ğŸ›¡ï¸ ë³´ë¼ìƒ‰: ì‹¤ë“œ</div>
                <div><br><strong>ëª©í‘œ:</strong></div>
                <div>â€¢ ìƒ‰ê¹” ë‹¨ì–´ë¥¼ ì…ë ¥í•´ì„œ íŠ¹ìˆ˜ëŠ¥ë ¥ íšë“!</div>
                <div>â€¢ ë–¨ì–´ì§€ëŠ” ë‹¨ì–´ë¥¼ ì…ë ¥í•´ì„œ ì„±ì„ ì§€í‚¤ì„¸ìš”!</div>
            </div>
        </div>
    </div>
</div>

<!-- íŒŒì›Œì—… UI -->
<div class="active-powerups" id="activePowerUps"></div>

<!-- ê²Œì„ ì˜¤ë²„ ëª¨ë‹¬ -->
<div class="game-over-modal" id="gameOverModal">
    <div class="modal-content">
        <h2 class="modal-title">ğŸ® ê²Œì„ ì˜¤ë²„!</h2>
        <div class="modal-score">
            <p>ìµœì¢… ì ìˆ˜: <span id="finalScore">0</span></p>
            <p>íšë“ ì½”ì¸: <span id="finalCoins">0</span> ğŸª™</p>
            <p>ìµœê³  ì½¤ë³´: <span id="maxCombo">0</span> ğŸ”¥</p>
        </div>
        <div class="leaderboard">
            <h3>ğŸ† ìµœê³  ê¸°ë¡</h3>
            <div id="leaderboardList"></div>
        </div>
        <button class="game-btn start-btn" onclick="location.reload()">ë‹¤ì‹œ ì‹œì‘</button>
    </div>
</div>

<!-- ì¼ì‹œì •ì§€ ëª¨ë‹¬ -->
<div class="pause-modal" id="pauseModal">
    <div class="modal-content">
        <h2 class="modal-title">â¸ï¸ ì¼ì‹œì •ì§€</h2>
        <p>ê²Œì„ì„ ê³„ì†í•˜ì‹œë ¤ë©´ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”!</p>
        <button class="game-btn start-btn" id="resumeBtn">â–¶ï¸ ê³„ì†í•˜ê¸°</button>
    </div>
</div>

<!-- ëª¨ë°”ì¼ í‚¤ë³´ë“œ -->
<div class="mobile-keyboard" id="mobileKeyboard">
    <div class="keyboard-row">
        <button class="key-btn" data-key="ã…‚">ã…‚</button>
        <button class="key-btn" data-key="ã…ˆ">ã…ˆ</button>
        <button class="key-btn" data-key="ã„·">ã„·</button>
        <button class="key-btn" data-key="ã„±">ã„±</button>
        <button class="key-btn" data-key="ã……">ã……</button>
        <button class="key-btn" data-key="ã…›">ã…›</button>
        <button class="key-btn" data-key="ã…•">ã…•</button>
        <button class="key-btn" data-key="ã…‘">ã…‘</button>
        <button class="key-btn" data-key="ã…">ã…</button>
        <button class="key-btn" data-key="ã…”">ã…”</button>
    </div>
    <div class="keyboard-row">
        <button class="key-btn" data-key="ã…">ã…</button>
        <button class="key-btn" data-key="ã„´">ã„´</button>
        <button class="key-btn" data-key="ã…‡">ã…‡</button>
        <button class="key-btn" data-key="ã„¹">ã„¹</button>
        <button class="key-btn" data-key="ã…">ã…</button>
        <button class="key-btn" data-key="ã…—">ã…—</button>
        <button class="key-btn" data-key="ã…“">ã…“</button>
        <button class="key-btn" data-key="ã…">ã…</button>
        <button class="key-btn" data-key="ã…£">ã…£</button>
    </div>
    <div class="keyboard-row">
        <button class="key-btn" data-key="ã…‹">ã…‹</button>
        <button class="key-btn" data-key="ã…Œ">ã…Œ</button>
        <button class="key-btn" data-key="ã…Š">ã…Š</button>
        <button class="key-btn" data-key="ã…">ã…</button>
        <button class="key-btn" data-key="ã… ">ã… </button>
        <button class="key-btn" data-key="ã…œ">ã…œ</button>
        <button class="key-btn" data-key="ã…¡">ã…¡</button>
        <button class="key-btn key-backspace" data-key="backspace">âŒ«</button>
    </div>
    <div class="keyboard-row">
        <button class="key-btn key-space" data-key=" ">ìŠ¤í˜ì´ìŠ¤</button>
        <button class="key-btn" data-key="enter">â†µ</button>
    </div>
</div>

<script>
    // ê²Œì„ ë³€ìˆ˜ë“¤
    let score = 0;
    let level = 1;
    let lives = 3;
    let coins = 0;
    let combo = 0;
    let maxCombo = 0;
    let gameRunning = false;
    let gamePaused = false;
    let words = [];
    let wordSpeed = 0.05; // ì´ˆê¸° ì†ë„ë¥¼ í›¨ì”¬ ë” ëŠë¦¬ê²Œ
    let baseWordSpeed = 0.05; // ë” ë†’ì€ ê²Œì„ ì˜ì—­ì— ë§ì¶° ì†ë„ ë” ëŠë¦¬ê²Œ
    let speedMultiplier = 1.0; // ì‚¬ìš©ì ì¡°ì ˆ ê°€ëŠ¥í•œ ì†ë„ ë°°ìˆ˜
    let spawnInterval;
    let gameLoop;
    let selectedCharacter = 'ğŸ˜';
    let soundEnabled = true;

    // ë³´ìŠ¤ ì‹œìŠ¤í…œ
    let currentBoss = null;
    let bossActive = false;
    let bossHP = 0;
    let bossMaxHP = 0;

    // í­íƒ„ ì‹œìŠ¤í…œ
    let bombCount = 0; // í˜„ì¬ ë³´ìœ í•œ í­íƒ„ ê°œìˆ˜
    const maxBombs = 3; // ìµœëŒ€ í­íƒ„ ê°œìˆ˜
    let bombCooldown = false; // í­íƒ„ ì¬ì‚¬ìš© ëŒ€ê¸° ìƒíƒœ
    const bombCooldownTime = 5000; // ì¬ì‚¬ìš© ëŒ€ê¸°ì‹œê°„ 5ì´ˆ

    // íŒŒì›Œì—… ì‹œìŠ¤í…œ
    let powerUps = [];
    let activePowerUps = {
        timeFreeze: { active: false, duration: 0 },
        slowMotion: { active: false, duration: 0 },
        doubleScore: { active: false, duration: 0 },
        shield: { active: false, uses: 0 }
    };

    // ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸
    let audioContext = null;

    // ë‹¨ì–´ ëª©ë¡ (í•œê¸€ íƒ€ì´í•‘ ë‚œì´ë„ë³„ - ë°›ì¹¨ ì—†ëŠ” ê¸€ìë¶€í„° ì¥ë¬¸ê¹Œì§€)
    const wordLists = {
        1: [
            // ë°›ì¹¨ì´ ì—†ëŠ” ê°„ë‹¨í•œ ê¸€ìë“¤ (2-3ê¸€ì) - ëŒ€í­ í™•ì¥
            'ê°€ë‚˜', 'ë‚˜ë¹„', 'ë‹¤ë¦¬', 'ë¼ë””ì˜¤', 'ë§ˆë¯¸', 'ë°”ë‚˜ë‚˜', 'ì‚¬ì', 'ì•„ê¸°', 'ì•¼êµ¬', 'ì˜¤ë¦¬',
            'ìš°ìœ ', 'ì´ëª¨', 'í† ë§ˆí† ', 'íŒŒì´', 'í•˜ë§ˆ', 'ë…¸ë¦¬', 'ë„ì‹œ', 'ê³ ê¸°', 'ì†Œë¦¬', 'ëª¨ê¸°',
            'í”¼ì', 'ì¹˜ì¦ˆ', 'í‚¤ë³´ë“œ', 'í‹°ìŠˆ', 'ë‹ˆëª¨', 'ë¦¬ëª¨ì»¨', 'ë¯¸ì†Œ', 'ì‹œì†Œ', 'ì½”ì¹´ì½œë¼', 'í¬ë„',
            'ê²Œì„', 'ë² ê°œ', 'ì„¸ê³„', 'í…Œë‹ˆìŠ¤', 'ë„¤ëª¨', 'ì¼€ì´í¬', 'ë ˆê³ ', 'ë©”ëª¨', 'í—¤ì–´', 'ì—¬ìš°',
            'ë¨¸ë¦¬', 'í—ˆë¦¬', 'ì €ê¸°', 'ê±°ê¸°', 'ì—¬ê¸°', 'ì„œë¦¬', 'ë”ìœ„', 'ë„ˆë¬´', 'ì˜¤í† ë°”ì´', 'ë¡œë´‡',
            'ê°€ê²Œ', 'ë‚˜ë¬´', 'ë‹¤ì†Œ', 'ë¼ë©´', 'ë§ˆìš”', 'ë°”ì§€', 'ì‚¬ê³¼', 'ì•„ë˜', 'ì•¼ì±„', 'ì˜¤ë¹ ',
            'ìš°ë¦¬', 'ì´ìœ ', 'í† ë¼', 'íŒŒí‹°', 'í•˜ë£¨', 'ë…¸ë˜', 'ë„êµ¬', 'ê³ ë˜', 'ì†ŒíŒŒ', 'ëª¨ì',
            'í”¼ì•„ë…¸', 'ì¹˜ë£Œ', 'í‚¤ìœ„', 'í‹°ì¼“', 'ë‹ˆì½”', 'ë¦¬ë³¸', 'ë¯¸ë˜', 'ì‹œê³„', 'ì½”í”¼', 'í¬ê¸°',
            'ê²Œì‹œ', 'ë² ì´ë¹„', 'ì„¸ìƒ', 'í…Œì´í”„', 'ë„¤ë¹„', 'ì¼€ì–´', 'ë ˆì‹œí”¼', 'ë©”ë‰´', 'í—¬ë¡œ', 'ì—¬í–‰',
            'ê°€ìœ„', 'ë‚˜ì´', 'ë‹¤ì´ì–´íŠ¸', 'ë¼ì´í„°', 'ë§ˆì´í¬', 'ë°”ì´ëŸ¬ìŠ¤', 'ì‚¬ì´ì¦ˆ', 'ì•„ì´ìŠ¤í¬ë¦¼', 'ì•¼ì™¸', 'ì˜¤ë””ì˜¤',
            'ìš°ì²´êµ­', 'ì´ë§ˆ', 'í† ìš”ì¼', 'íŒŒë„', 'í•˜ì´', 'ë…¸í•˜ìš°', 'ë„ë¯¸ë…¸', 'ê³ êµ¬ë§ˆ', 'ì†Œì‹œì§€', 'ëª¨ëª¨',
            'í”¼í¬ë‹‰', 'ì¹˜ë§ˆ', 'í‚¤ì¦ˆ', 'í‹°ìŠˆë°•ìŠ¤', 'ë‹ˆíŠ¸', 'ë¦¬ë”', 'ë¯¸ë””ì–´', 'ì‹œë£¨', 'ì½”ìŠ¤ëª¨ìŠ¤', 'í¬ìŠ¤í„°',
            'ê°€ìš”', 'ë‚˜ëˆ”', 'ë‹¤í', 'ë¼ë–¼', 'ë§ˆìŠ¤í¬', 'ë°”ì½”ë“œ', 'ì‚¬íŒŒë¦¬', 'ì•„ì¿ ì•„', 'ì•¼í˜¸', 'ì˜¤ì¼€ì´',
            'ìš°ì‚°', 'ì´ì§€', 'í† í”¼', 'íŒŒìš°ë”', 'í•˜ìš°ìŠ¤', 'ë…¸íŠ¸ë¶', 'ë„ì–´', 'ê³ ì¶”', 'ì†ŒìŠ¤', 'ëª¨ë¸ë§'
        ],
        2: [
            // ë°›ì¹¨ì´ ê°„ë‹¨í•œ ê¸€ìë“¤ (ã„´, ã„¹, ã… ë°›ì¹¨ ìœ„ì£¼) - ëŒ€í­ í™•ì¥
            'ì—°í•„', 'ì»´í“¨í„°', 'ë‹¬ë‹˜', 'ë¬¼ê³ ê¸°', 'ê³°ëŒì´', 'ë”¸ê¸°', 'í–„ë²„ê±°', 'ë°¤í•˜ëŠ˜', 'ê³µì›', 'ë¬¸ë°©êµ¬',
            'ì„ ë¬¼', 'ì „í™”', 'ë§Œí™”', 'ë‹¨ì¶”', 'ê°„ì‹', 'ë¹µì§‘', 'ë†€ì´í„°', 'ì»¬ëŸ¬', 'ê·¸ë¦¼', 'ê¿ˆë‚˜ë¼',
            'ë¯¼ë“¤ë ˆ', 'íŒ¬ë”', 'ì»¨ë²„ìŠ¤', 'ë©œë¡ ', 'í‘¸ë”©', 'ë³¼íœ', 'ê·¤ê»ì§ˆ', 'í™ˆëŸ°', 'ë§ˆìˆ ', 'í…íŠ¸',
            'ì¹´ë©”ë¼', 'ì»µë¼ë©´', 'ìœˆë„ìš°', 'ì½œë¼', 'í„¸ì‹¤', 'ë©€í‹°íƒ­', 'í”Œë¼ìŠ¤í‹±', 'í• ë¨¸ë‹ˆ', 'í• ì•„ë²„ì§€', 'ì›ìˆ­ì´',
            'ê°•ì•„ì§€', 'ê°ì‚¬', 'ê°‘ìê¸°', 'ê±¸ìŒ', 'ê²¬í•™', 'ê²°ì •', 'ê³µë¶€', 'êµ°ì¸', 'ê·€ì—¬ìš´', 'ê¸ˆìš”ì¼',
            'ë‚¨í•™ìƒ', 'ëˆˆë¬¼', 'ë‹¤ìŒ', 'ë‹¬ë ¥', 'ë‹´ì„', 'ëŒ€ë‹µ', 'ë™ë¬¼', 'ë“¤íŒ', 'ë”±ì§€', 'ë˜ëŠ”',
            'ë§Œë‚¨', 'ë§ì”€', 'ë©‹ìˆëŠ”', 'ë©´ì ‘', 'ëª…ì ˆ', 'ëª¨ë“ ', 'ë¬¸ì œ', 'ë¯¸ì•ˆ', 'ë¯¼ì¡±', 'ë°€ê°€ë£¨',
            'ë°œê²¬', 'ë°©ë¬¸', 'ë²ˆí˜¸', 'ë³„ë‹˜', 'ë³‘ì›', 'ë³µìŠµ', 'ë¶€ëª¨ë‹˜', 'ë¶„í™', 'ë¶ˆê³ ê¸°', 'ë¹„ëˆ„',
            'ì‚°ì±…', 'ì‚¼ì´Œ', 'ìƒì¼', 'ì„ ìƒë‹˜', 'ì„±ê³µ', 'ì†Œë…„', 'ìˆ˜ì—…', 'ìˆ™ì œ', 'ìˆœì„œ', 'ì‹œê°„',
            'ì•ˆë…•', 'ì•Œë¦¼', 'ì•½ì†', 'ì–´ë¦°ì´', 'ì—¬ë¦„', 'ì—°ë½', 'ì—´ì‹¬íˆ', 'ì˜í™”', 'ì˜¤ëŠ˜', 'ìš°ì •',
            'ì¸ì‚¬', 'ì¼ê¸°', 'ìì—°', 'ì ê¹', 'ì „ì²´', 'ì •ë§', 'ì¢…ì´', 'ì£¼ë§', 'ì¤€ë¹„', 'ì¤‘ìš”í•œ',
            'ì¹œêµ¬', 'ì¹ íŒ', 'ì¹¨ì‹¤', 'ì»µì¼€ìµ', 'í† ë¼', 'íŠ¹ë³„í•œ', 'íŒŒë€ìƒ‰', 'í¸ì§€', 'í•„ìš”í•œ', 'í•™êµ',
            'í•œêµ­', 'í• ì¼', 'í•­ìƒ', 'í•´ë‹˜', 'í–‰ë³µí•œ', 'í˜„ê´€', 'í˜¸ë‘ì´', 'í™ˆí˜ì´ì§€', 'í™”ì¥ì‹¤', 'íšŒì˜ì‹¤'
        ],
        3: [
            // ë³µì¡í•œ ë°›ì¹¨ê³¼ ê¸´ ë‹¨ì–´ë“¤ (4-6ê¸€ì) - ëŒ€í­ í™•ì¥
            'ìŠ¤í‚¤ë¹„ë””', 'í† ì¼ë ›', 'ì°ì¹œ', 'ë¸Œë¡¤ìŠ¤íƒ€ì¦ˆ', 'ë§ˆì¸í¬ë˜í”„íŠ¸', 'í¬íŠ¸ë‚˜ì´íŠ¸', 'ë¡œë¸”ë¡ìŠ¤', 'ì´ˆë“±í•™êµ', 'íƒ€ìì—°ìŠµ',
            'ê²Œì„ë°©ì†¡', 'ìœ íŠœë¸Œ', 'í‹±í†¡', 'ì¸ìŠ¤íƒ€ê·¸ë¨', 'ì¹´ì¹´ì˜¤í†¡', 'ë„¤ì´ë²„', 'êµ¬ê¸€', 'ì‚¼ì„±ê°¤ëŸ­ì‹œ', 'ì•„ì´í°',
            'ì¹˜í‚¨ë„ˆê²Ÿ', 'í”¼ìí—›', 'ë§¥ë„ë‚ ë“œ', 'ë²„ê±°í‚¹', 'ë¡¯ë°ì›”ë“œ', 'ì—ë²„ëœë“œ', 'ë½€ë¡œë¡œ', 'í¬ë ˆìš©ì‹ ì§±', 'í¬ì¼“ëª¬ìŠ¤í„°',
            'ì§±êµ¬ì•„ë¹ ', 'ë„ë¼ì—ëª½', 'ë¼ì´ì–¸í‚¹', 'ë””ì¦ˆë‹ˆëœë“œ', 'ìŠˆí¼ë§ˆë¦¬ì˜¤', 'ì ¤ë‹¤ì˜ì „ì„¤', 'ì˜¤ë²„ì›Œì¹˜', 'ë¦¬ê·¸ì˜¤ë¸Œë ˆì „ë“œ',
            'ì»´í“¨í„°ê²Œì„', 'ìŠ¤ë§ˆíŠ¸í°', 'íƒœë¸”ë¦¿', 'ë…¸íŠ¸ë¶', 'í‚¤ë³´ë“œ', 'ë§ˆìš°ìŠ¤', 'ëª¨ë‹ˆí„°', 'ìŠ¤í”¼ì»¤', 'ì´ì–´í°', 'ì¶©ì „ê¸°',
            'ì¶•êµ¬ê³µ', 'ë†êµ¬ê³µ', 'ì•¼êµ¬ê³µ', 'ë°°ë“œë¯¼í„´', 'íƒêµ¬ê³µ', 'ìˆ˜ì˜ì¥', 'ìì „ê±°', 'ìŠ¤ì¼€ì´íŠ¸ë³´ë“œ', 'ë¡¤ëŸ¬ìŠ¤ì¼€ì´íŠ¸', 'í‚¥ë³´ë“œ',
            'í–„ë²„ê±°', 'ì¹˜í‚¨ë²„ê±°', 'ë¶ˆê³ ê¸°ë²„ê±°', 'ìƒˆìš°ë²„ê±°', 'ìƒì„ ë²„ê±°', 'ì¹˜ì¦ˆë²„ê±°', 'ë² ì´ì»¨ë²„ê±°', 'ë”ë¸”ë²„ê±°', 'ì„¸íŠ¸ë©”ë‰´', 'ì½œë¼',
            'ì•„ì´ìŠ¤í¬ë¦¼', 'ì´ˆì½œë¦¿', 'ì‚¬íƒ•', 'ì ¤ë¦¬', 'ì¿ í‚¤', 'ì¼€ì´í¬', 'ë„ë„›', 'ë§ˆì¹´ë¡±', 'ì™€í”Œ', 'íŒ¬ì¼€ì´í¬',
            'í…”ë ˆë¹„ì „', 'ëƒ‰ì¥ê³ ', 'ì„¸íƒê¸°', 'ì „ìë ˆì¸ì§€', 'ì—ì–´ì»¨', 'ì„ í’ê¸°', 'ì²­ì†Œê¸°', 'ë‹¤ë¦¬ë¯¸', 'í—¤ì–´ë“œë¼ì´ì–´', 'í† ìŠ¤í„°',
            'ë³‘ì›', 'ì•½êµ­', 'ì€í–‰', 'ìš°ì²´êµ­', 'ë„ì„œê´€', 'ë°•ë¬¼ê´€', 'ë¯¸ìˆ ê´€', 'ì˜í™”ê´€', 'ë†€ì´ê³µì›', 'ë™ë¬¼ì›',
            'ìë™ì°¨', 'ë²„ìŠ¤', 'ì§€í•˜ì² ', 'íƒì‹œ', 'ì˜¤í† ë°”ì´', 'ìì „ê±°', 'ê¸°ì°¨', 'ë¹„í–‰ê¸°', 'ë°°', 'í—¬ë¦¬ì½¥í„°',
            'ì‚¬ê³¼', 'ë°”ë‚˜ë‚˜', 'ì˜¤ë Œì§€', 'ë”¸ê¸°', 'í¬ë„', 'ìˆ˜ë°•', 'ì°¸ì™¸', 'ë³µìˆ­ì•„', 'ë°°', 'ê°',
            'ì¶•êµ¬ì„ ìˆ˜', 'ì•¼êµ¬ì„ ìˆ˜', 'ë†êµ¬ì„ ìˆ˜', 'í…Œë‹ˆìŠ¤ì„ ìˆ˜', 'ìˆ˜ì˜ì„ ìˆ˜', 'ê³¨í”„ì„ ìˆ˜', 'ë°°êµ¬ì„ ìˆ˜', 'íƒêµ¬ì„ ìˆ˜', 'ìœ¡ìƒì„ ìˆ˜', 'ì²´ì¡°ì„ ìˆ˜'
        ],
        4: [
            // ì§§ì€ ë¬¸ì¥ë“¤ - ëŒ€í­ í™•ì¥
            'ê²Œì„í•˜ê³ ì‹¶ì–´', 'ìˆ™ì œë‹¤í–ˆì–´', 'ì¹œêµ¬ë‘ë†€ì', 'ì—„ë§ˆì‚¬ë‘í•´', 'ì•„ë¹ í˜ë‚´ì„¸ìš”', 'ì„ ìƒë‹˜ì•ˆë…•í•˜ì„¸ìš”', 'ì˜¤ëŠ˜ë‚ ì”¨ì¢‹ë„¤',
            'ë°°ê³ íŒŒì£½ê² ì–´', 'ëª©ë§ë¼ì£½ê² ì–´', 'ì‹¬ì‹¬í•´ì£½ê² ì–´', 'ì¬ë¯¸ìˆê²Œë†€ì', 'ê³µë¶€ì—´ì‹¬íˆí•˜ì', 'ê±´ê°•í•˜ê²Œì§€ë‚´ì', 'í–‰ë³µí•˜ê²Œì‚´ì',
            'ë‚´ì¼ì‹œí—˜ì´ì•¼', 'ì˜¤ëŠ˜ìƒì¼ì´ì•¼', 'ë°©í•™ì–¸ì œì™€', 'í¬ë¦¬ìŠ¤ë§ˆìŠ¤ê¸°ë‹¤ë ¤', 'ìƒˆí•™ê¸°ì‹œì‘ì´ì•¼', 'ì¡¸ì—…ì¶•í•˜í•´', 'ì…í•™ì¶•í•˜í•´',
            'ì½”ë¡œë‚˜ì¡°ì‹¬í•´', 'ë§ˆìŠ¤í¬ê¼­ì¨', 'ì†ì”»ê¸°ìŠì§€ë§ˆ', 'ê±°ë¦¬ë‘ê¸°í•´', 'ë°±ì‹ ë§ì•˜ì–´', 'ê±´ê°•ì´ìµœê³ ì•¼', 'ê°€ì¡±ì´ì†Œì¤‘í•´',
            'í•™êµê°€ê¸°ì‹«ì–´', 'ìˆ™ì œë„ˆë¬´ë§ì•„', 'ì¹œêµ¬ë“¤ë§Œë‚˜ê³ ì‹¶ì–´', 'ë†€ì´í„°ì—ì„œë†€ì', 'ì¶•êµ¬í•˜ê³ ì‹¶ì–´', 'ë§Œí™”ì±…ì½ê³ ì‹¶ì–´', 'ê²Œì„ì‹œê°„ì´ë¶€ì¡±í•´',
            'í”¼ìë¨¹ê³ ì‹¶ì–´', 'ì¹˜í‚¨ë„ˆë¬´ë§›ìˆì–´', 'ì•„ì´ìŠ¤í¬ë¦¼ì‚¬ì¤˜', 'ì¥ë‚œê°ì‚¬ê³ ì‹¶ì–´', 'ìƒˆì˜·ì…ê³ ì‹¶ì–´', 'ë¨¸ë¦¬ìë¥´ê³ ì‹¶ì–´', 'ì‹ ë°œë°”ê¾¸ê³ ì‹¶ì–´',
            'ì—„ë§ˆì–´ë””ê°”ì–´', 'ì•„ë¹ ì–¸ì œì™€', 'í• ë¨¸ë‹ˆë³´ê³ ì‹¶ì–´', 'í• ì•„ë²„ì§€ì•ˆë…•í•˜ì„¸ìš”', 'í˜•ì´ë†€ë ¤', 'ëˆ„ë‚˜í™”ë‚¬ì–´', 'ë™ìƒê·€ì—¬ì›Œ',
            'ì„ ìƒë‹˜ê³ ë§ˆì›Œìš”', 'ì¹œêµ¬ë“¤ëª¨ë‘ì•ˆë…•', 'ì˜¤ëŠ˜ì¬ë¯¸ìˆì—ˆì–´', 'ë‚´ì¼ë­í• ê¹Œ', 'ì£¼ë§ê³„íšìˆì–´', 'ë°©í•™ìˆ™ì œëë‚¬ì–´', 'ìƒˆí•™ê¸°ì¤€ë¹„í•´ì•¼ì§€',
            'ê°ê¸°ì¡°ì‹¬í•´', 'ì˜ìë¼ê¿ˆê¿”', 'ì¼ì°ì¼ì–´ë‚˜ì', 'ë°¥ë§›ìˆê²Œë¨¹ì–´', 'ë¬¼ë§ì´ë§ˆì…”', 'ìš´ë™í•˜ì', 'ì±…ë§ì´ì½ì',
            'ì»´í“¨í„°ì‹œê°„ì¤„ì´ì', 'í…”ë ˆë¹„ì „ê·¸ë§Œë´', 'ê²Œì„ì ë‹¹íˆí•´', 'ê³µë¶€ì‹œê°„ì´ì•¼', 'ìˆ™ì œë¨¼ì €í•´', 'ì •ë¦¬ì •ëˆí•˜ì', 'ì²­ì†Œë„ì™€ì¤˜',
            'ìƒì¼ì¶•í•˜í•´', 'ìƒˆí•´ë³µë§ì´ë°›ì•„', 'ì„¤ë‚ ì˜ë³´ë‚´', 'ì¶”ì„ì¦ê²ê²Œë³´ë‚´', 'ì–´ë¦°ì´ë‚ ì¶•í•˜í•´', 'ìŠ¤ìŠ¹ì˜ë‚ ê°ì‚¬í•´', 'í¬ë¦¬ìŠ¤ë§ˆìŠ¤ì¦ê²ê²Œ',
            'ì—¬í–‰ê°€ê³ ì‹¶ì–´', 'ë°”ë‹¤ë³´ëŸ¬ê°€ì', 'ì‚°ì—ì˜¬ë¼ê°€ì', 'ê³µì›ì‚°ì±…í•˜ì', 'ë™ë¬¼ì›êµ¬ê²½ê°€ì', 'ë°•ë¬¼ê´€ê²¬í•™ê°€ì', 'ì˜í™”ë³´ëŸ¬ê°€ì'
        ],
        5: [
            // ì¥ë¬¸ì˜ ë¬¸ì¥ë“¤ - ëŒ€í­ í™•ì¥
            'ì•ˆë…•í•˜ì„¸ìš”ì¹œêµ¬ë“¤ì•„ì˜¤ëŠ˜ë„ì¦ê±°ìš´í•˜ë£¨ë³´ë‚´ì„¸ìš”', 'ìŠ¤í‚¤ë¹„ë””í† ì¼ë ›ê²Œì„ì •ë§ì¬ë¯¸ìˆì–´ì„œê³„ì†í•˜ê³ ì‹¶ì–´ìš”',
            'ì´ˆë“±í•™ìƒì¹œêµ¬ë“¤íƒ€ìì—°ìŠµì—´ì‹¬íˆí•´ì„œì»´í“¨í„°ë°•ì‚¬ê°€ë˜ì–´ë³´ì„¸ìš”', 'ê²Œì„ë§Œí•˜ì§€ë§ê³ ìˆ™ì œë„ì—´ì‹¬íˆí•˜ê³ ì±…ë„ë§ì´ì½ìœ¼ì„¸ìš”',
            'ê±´ê°•í•œëª¸ê³¼ë§ˆìŒìœ¼ë¡œí–‰ë³µí•œì–´ë¦°ì´ê°€ë˜ê¸¸ë°”ë¼ìš”', 'ì¹œêµ¬ë“¤ê³¼ì‚¬ì´ì¢‹ê²Œì§€ë‚´ê³ ì–´ë¥¸ë“¤ë§ì”€ì˜ë“¤ìœ¼ì„¸ìš”',
            'ë¯¸ë˜ì˜ê¿ˆì„ìœ„í•´ì„œì§€ê¸ˆë¶€í„°ì°¨ê·¼ì°¨ê·¼ì¤€ë¹„í•´ë‚˜ê°€ìš”', 'ì–´ë ¤ìš´ì¼ì´ìˆì–´ë„í¬ê¸°í•˜ì§€ë§ê³ ëê¹Œì§€ë…¸ë ¥í•´ë³´ì„¸ìš”',
            'ê°€ì¡±ì„ì‚¬ë‘í•˜ê³ ì¹œêµ¬ë¥¼ì†Œì¤‘íˆì—¬ê¸°ëŠ”ë§ˆìŒì°©í•œì–´ë¦°ì´ê°€ë˜ì„¸ìš”', 'ì»´í“¨í„°ê²Œì„ë„ì¬ë¯¸ìˆì§€ë§Œë°–ì—ì„œë›°ì–´ë…¸ëŠ”ê²ƒë„ì¤‘ìš”í•´ìš”',
            'ë§¤ì¼ë§¤ì¼ìƒˆë¡œìš´ê²ƒì„ë°°ìš°ê³ ì„±ì¥í•˜ëŠ”ê¸°ì¨ì„ëŠê»´ë³´ì„¸ìš”', 'ë‹¤ë¥¸ì‚¬ëŒì„ë°°ë ¤í•˜ê³ ë„ì™€ì£¼ëŠ”ë”°ëœ»í•œë§ˆìŒì„ê°€ì ¸ìš”',
            'ì‹¤ìˆ˜ë¥¼í•´ë„ê´œì°®ìœ¼ë‹ˆê¹Œë‹¤ì‹œë„ì „í•˜ëŠ”ìš©ê¸°ë¥¼ìƒì§€ë§ˆì„¸ìš”', 'ì˜¤ëŠ˜í•˜ë£¨ë„ì—´ì‹¬íˆê³µë¶€í•˜ê³ ì¬ë¯¸ìˆê²Œë†€ì•˜ë‚˜ìš”',
            'ë‚´ì¼ì€ë”ì¢‹ì€ì¼ë“¤ì´ê¸°ë‹¤ë¦¬ê³ ìˆì„ê±°ì˜ˆìš”íŒŒì´íŒ…', 'ì–´ë¦°ì´ì—¬ëŸ¬ë¶„ëª¨ë‘ê±´ê°•í•˜ê³ í–‰ë³µí•œë‚˜ë‚ ë³´ë‚´ì„¸ìš”',
            'í•™êµì—ì„œë°°ìš°ëŠ”ëª¨ë“ ê³¼ëª©ì´ë‹¤ì¤‘ìš”í•˜ë‹ˆê¹Œê³¨ê³ ë£¨ì—´ì‹¬íˆê³µë¶€í•˜ì„¸ìš”', 'ì¹œêµ¬ë“¤ê³¼í•¨ê»˜í•˜ëŠ”ëª¨ë“ í™œë™ì—ì„œë°°ë ¤í•˜ëŠ”ë§ˆìŒì„ìŠì§€ë§ˆì„¸ìš”',
            'ë¶€ëª¨ë‹˜ê³¼ì„ ìƒë‹˜ê»˜ê°ì‚¬í•˜ëŠ”ë§ˆìŒì„í•­ìƒê°€ì§€ê³ ì˜ˆì˜ë°”ë¥´ê²Œí–‰ë™í•˜ì„¸ìš”', 'ì±…ì„ì½ìœ¼ë©´ìƒˆë¡œìš´ì§€ì‹ì„ì–»ê³ ìƒìƒë ¥ë„ê¸°ë¥¼ìˆ˜ìˆì–´ìš”',
            'ìš´ë™ì„í•˜ë©´ëª¸ì´ê±´ê°•í•´ì§€ê³ ì¹œêµ¬ë“¤ê³¼ë”ì¬ë¯¸ìˆê²Œë†€ìˆ˜ìˆì–´ìš”', 'ìŒì•…ì„ë“£ê³ ê·¸ë¦¼ì„ê·¸ë¦¬ë©´ë§ˆìŒì´í¸ì•ˆí•´ì§€ê³ ì°½ì˜ë ¥ì´ìƒê²¨ìš”',
            'ìì—°ì„ì‚¬ë‘í•˜ê³ í™˜ê²½ì„ë³´í˜¸í•˜ëŠ”ì°©í•œì–´ë¦°ì´ê°€ë˜ì–´ì£¼ì„¸ìš”', 'ë‹¤ë¥¸ë‚˜ë¼ì‚¬ëŒë“¤ê³¼ë„ì¹œêµ¬ê°€ë˜ì–´ì„œí‰í™”ë¡œìš´ì„¸ìƒì„ë§Œë“¤ì–´ìš”',
            'ì–´ë ¤ìš´ì‚¬ëŒë“¤ì„ë„ì™€ì£¼ê³ ë‚˜ëˆ„ì–´ì£¼ëŠ”ë”°ëœ»í•œë§ˆìŒì„ê°€ì ¸ë³´ì„¸ìš”', 'ì‹¤íŒ¨ë¥¼ë‘ë ¤ì›Œí•˜ì§€ë§ê³ ìƒˆë¡œìš´ë„ì „ì„ê³„ì†í•´ë³´ì„¸ìš”',
            'ì •ì§í•˜ê³ ì„±ì‹¤í•œì‚¬ëŒì´ë˜ì–´ì„œëª¨ë“ ì‚¬ëŒì—ê²Œì‚¬ë‘ë°›ëŠ”ì–´ë¦°ì´ê°€ë˜ì„¸ìš”', 'ê¿ˆì„í¬ê²Œê°€ì§€ê³ ê·¸ê¿ˆì„ì´ë£¨ê¸°ìœ„í•´ì„œë§¤ì¼ë…¸ë ¥í•˜ì„¸ìš”',
            'ì»´í“¨í„°ì™€ì¸í„°ë„·ì„ì˜¬ë°”ë¥´ê²Œì‚¬ìš©í•´ì„œì¢‹ì€ì •ë³´ë¥¼ì–»ê³ ê³µë¶€ì—ë„ì›€ì´ë˜ê²Œí•˜ì„¸ìš”', 'ê²Œì„ë„ì¬ë¯¸ìˆì§€ë§Œë…ì„œì™€ìš´ë™ë„ê· í˜•ìˆê²Œí•´ì„œê±´ê°•í•œìƒí™œì„í•˜ì„¸ìš”'
        ]
    };

    // ë³´ìŠ¤ ë‹¨ì–´ë“¤ (ë ˆë²¨ë³„)
    const bossWords = {
        1: { word: 'ìŠ¤í‚¤ë¹„ë””í‚¹', hp: 3, reward: 1000 },
        2: { word: 'ë¸Œë¡¤ìŠ¤íƒ€ì¦ˆë§ˆìŠ¤í„°', hp: 4, reward: 2000 },
        3: { word: 'ë§ˆì¸í¬ë˜í”„íŠ¸ë³´ìŠ¤', hp: 5, reward: 3000 },
        4: { word: 'ì°ì¹œê³¼í•¨ê»˜í•˜ëŠ”ëŒ€ëª¨í—˜', hp: 6, reward: 4000 },
        5: { word: 'ì´ˆì ˆì •ìŠ¤í‚¤ë¹„ë””í†¨ë ›ê¶ê·¹ì²´', hp: 8, reward: 5000 }
    };

    // ì´ˆê¸°í™”
    function init() {
        console.log('=== ê²Œì„ ì´ˆê¸°í™” ì‹œì‘ ===');

        createStars();
        loadHighScores();
        setupEventListeners();
        updateDisplay();

        console.log('ê²Œì„ ì´ˆê¸°í™” ì™„ë£Œ');

        // í…ŒìŠ¤íŠ¸ìš©: í˜ì´ì§€ ë¡œë“œ í›„ 3ì´ˆ ë’¤ì— ë‹¨ì–´ í•˜ë‚˜ ìƒì„±
        setTimeout(() => {
            console.log('ì´ˆê¸°í™” í›„ í…ŒìŠ¤íŠ¸ ë‹¨ì–´ ìƒì„±...');
            createWord('ì´ˆê¸°í™”í…ŒìŠ¤íŠ¸');
        }, 3000);

        // ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸ ì´ˆê¸°í™”
        if (!audioContext) {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            } catch (e) {
                console.log('Web Audio API not supported');
                soundEnabled = false;
            }
        }
    }

    // ë³„ ìƒì„±
    function createStars() {
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 50; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = Math.random() * 10 + 'px';
            star.style.height = star.style.width;
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }
    }

    // ì‚¬ìš´ë“œ í•¨ìˆ˜ë“¤
    function playSound(frequency, duration, type = 'sine') {
        if (!soundEnabled || !audioContext) return;

        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
        oscillator.type = type;

        gainNode.gain.setValueAtTime(0, audioContext.currentTime);
        gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.01);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + duration);
    }

    function playCorrectSound() {
        // ê·€ì—¬ìš´ ì •ë‹µ ì†Œë¦¬ (ë„ë ˆë¯¸íŒŒì†” ìƒìŠ¹ìŒ)
        const notes = [523.25, 587.33, 659.25, 698.46, 783.99]; // C5-D5-E5-F5-G5
        notes.forEach((freq, index) => {
            setTimeout(() => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                oscillator.type = 'triangle'; // ë¶€ë“œëŸ¬ìš´ ì†Œë¦¬

                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.08);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.08);
            }, index * 40);
        });
    }

    function playWrongSound() {
        // ê·€ì—¬ìš´ í‹€ë¦¼ ì†Œë¦¬ (ë‚´ë¦¼ì°¨ìˆœ)
        if (!soundEnabled || !audioContext) return;

        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.3);
        oscillator.type = 'square';

        gainNode.gain.setValueAtTime(0, audioContext.currentTime);
        gainNode.gain.linearRampToValueAtTime(0.15, audioContext.currentTime + 0.01);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);

        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 0.3);
    }

    function playLevelUpSound() {
        // í™”ë ¤í•œ ë ˆë²¨ì—… ì†Œë¦¬ (íŠ¸ìœ™í´ íš¨ê³¼)
        const melody = [523.25, 659.25, 783.99, 1046.50, 783.99, 1046.50, 1318.51]; // C5-E5-G5-C6-G5-C6-E6

        melody.forEach((freq, index) => {
            setTimeout(() => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                oscillator.type = 'triangle';

                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.2);
            }, index * 80);
        });
    }

    function playGameOverSound() {
        // ìŠ¬í”ˆ ê²Œì„ì˜¤ë²„ ì†Œë¦¬ (ë‚´ë¦¼ì°¨ìˆœ ë©œë¡œë””)
        const sadMelody = [523.25, 493.88, 440.00, 392.00, 349.23]; // C5-B4-A4-G4-F4

        sadMelody.forEach((freq, index) => {
            setTimeout(() => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                oscillator.type = 'sine';

                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.4);
            }, index * 200);
        });
    }

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
    function setupEventListeners() {
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const soundBtn = document.getElementById('soundBtn');
        const resumeBtn = document.getElementById('resumeBtn');
        const gameInput = document.getElementById('gameInput');
        const speedUpBtn = document.getElementById('speedUpBtn');
        const speedDownBtn = document.getElementById('speedDownBtn');

        startBtn.addEventListener('click', startGame);
        pauseBtn.addEventListener('click', togglePause);
        soundBtn.addEventListener('click', toggleSound);
        resumeBtn.addEventListener('click', resumeGame);
        speedUpBtn.addEventListener('click', increaseSpeed);
        speedDownBtn.addEventListener('click', decreaseSpeed);

        // input ì´ë²¤íŠ¸ëŠ” ì œê±°í•˜ê³  Enterí‚¤ì—ì„œë§Œ ì²´í¬
        gameInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                checkWord();
            }
        });

        // ì…ë ¥ì°½ì—ì„œ íŠ¹ì • í‚¤ ì¡°í•© ë°©ì§€
        gameInput.addEventListener('keydown', (e) => {
            // Ctrl+í‚¤ ì¡°í•© ë“±ìœ¼ë¡œ ì¸í•œ ì˜ë„ì¹˜ ì•Šì€ ë™ì‘ ë°©ì§€
            if (e.ctrlKey || e.altKey || e.metaKey) {
                return;
            }

            // ê¸°ëŠ¥í‚¤ë“¤ ë¬´ì‹œ
            if (e.key.startsWith('F') ||
                e.key === 'Tab' ||
                e.key === 'CapsLock' ||
                e.key === 'NumLock' ||
                e.key === 'ScrollLock') {
                e.preventDefault();
                return;
            }
        });

        // ìºë¦­í„° ì„ íƒ
        document.querySelectorAll('.character').forEach(char => {
            char.addEventListener('click', selectCharacter);
        });

        // ëª¨ë°”ì¼ í‚¤ë³´ë“œ
        document.querySelectorAll('.key-btn').forEach(key => {
            key.addEventListener('click', (e) => {
                const keyValue = e.target.dataset.key;
                const input = document.getElementById('gameInput');

                if (keyValue === 'backspace') {
                    input.value = input.value.slice(0, -1);
                } else if (keyValue === 'enter') {
                    checkWord();
                } else {
                    input.value += keyValue;
                }

                input.focus();
            });
        });

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (ì…ë ¥ì°½ì— í¬ì»¤ìŠ¤ê°€ ì—†ì„ ë•Œë§Œ)
        document.addEventListener('keydown', (e) => {
            // SPACEí‚¤ë¡œ í­íƒ„ ì‚¬ìš© (ì…ë ¥ì°½ í¬ì»¤ìŠ¤ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´)
            if (e.key === ' ' && gameRunning && !gamePaused) {
                e.preventDefault();
                if (useBomb()) {
                    console.log('í­íƒ„ ì‚¬ìš©ë¨!');
                }
                return;
            }

            // ì…ë ¥ì°½ì— í¬ì»¤ìŠ¤ê°€ ìˆìœ¼ë©´ ë‹¤ë¥¸ ë‹¨ì¶•í‚¤ ë¬´ì‹œ
            if (document.activeElement === gameInput) {
                return;
            }

            if (e.key === 'Escape') {
                e.preventDefault();
                togglePause();
            }
        });
    }

    // ê²Œì„ ì‹œì‘
    function startGame() {
        console.log('=== ê²Œì„ ì‹œì‘ í•¨ìˆ˜ í˜¸ì¶œë¨ ===');

        score = 0;
        level = 1;
        lives = 5; // ì‹œì‘ ìƒëª…ì„ 5ê°œë¡œ ë³€ê²½
        coins = 0;
        combo = 0;
        maxCombo = 0;
        words = [];
        wordSpeed = baseWordSpeed * speedMultiplier; // ì‚¬ìš©ì ì„¤ì • ì†ë„ ì ìš©

        // í­íƒ„ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
        bombCount = 1; // ê²Œì„ ì‹œì‘ ì‹œ í­íƒ„ 1ê°œ ì œê³µ
        bombCooldown = false; // ì¬ì‚¬ìš© ëŒ€ê¸°ì‹œê°„ ì´ˆê¸°í™”
        updateBombDisplay();

        // ì„± ìƒíƒœ ì´ˆê¸°í™” (ì •ìƒ ìƒíƒœë¡œ)
        const castle = document.querySelector('.castle');
        if (castle) {
            castle.classList.remove('damaged-1', 'damaged-2', 'damaged-3');
        }
        gameRunning = true;
        gamePaused = false;

        console.log('ê²Œì„ ë³€ìˆ˜ ì´ˆê¸°í™” ì™„ë£Œ');

        document.getElementById('gameInput').disabled = false;
        document.getElementById('gameInput').focus();
        document.getElementById('startBtn').textContent = 'ğŸ”„ ë‹¤ì‹œ ì‹œì‘';

        console.log('UI ì—…ë°ì´íŠ¸ ì™„ë£Œ');

        updateDisplay();

        // ê²Œì„ ì‹œì‘ ì¦‰ì‹œ ì²« ë²ˆì§¸ ë‹¨ì–´ ìƒì„± (í…ŒìŠ¤íŠ¸ìš©)
        console.log('í…ŒìŠ¤íŠ¸ ë‹¨ì–´ ìƒì„± ì‹œë„...');
        createWord('í…ŒìŠ¤íŠ¸');

        // 2ì´ˆ í›„ ì¶”ê°€ ë‹¨ì–´ ìƒì„±
        setTimeout(() => {
            console.log('íƒ€ì´ë¨¸ë¡œ ë‹¨ì–´ ìƒì„± ì‹œë„...');
            if (gameRunning) {
                // ì„ íƒëœ ëª¨ë“œì— ë”°ë¼ ë‹¨ì–´ ë°°ì—´ ê°€ì ¸ì˜¤ê¸°
                const wordList = getWordsByMode(1); // ì²« ë ˆë²¨
                const word = wordList[Math.floor(Math.random() * wordList.length)];
                console.log('ì„ íƒëœ ë‹¨ì–´:', word);
                createWord(word);
            }
        }, 2000);

        startWordSpawn();
        startGameLoop();

        // ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸ ì´ˆê¸°í™”
        if (!audioContext) {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            } catch (e) {
                console.log('Web Audio API not supported');
            }
        }
    }

    // ë‹¨ì–´ ìƒì„±
    function startWordSpawn() {
        if (spawnInterval) clearInterval(spawnInterval);

        // ì ìˆ˜ì— ë”°ë¥¸ ë‹¨ì–´ ìƒì„± ê°„ê²© ì¡°ì ˆ (ì´ˆê¸°: 2ì´ˆ, ìµœì†Œ: 0.8ì´ˆ)
        const spawnRate = Math.max(800, 2000 - (score / 200 * 50));

        spawnInterval = setInterval(() => {
            if (!gameRunning || gamePaused) return;

            // í™”ë©´ì— ë‹¨ì–´ê°€ 5ê°œ ë¯¸ë§Œì¼ ë•Œë§Œ ìƒì„±
            if (words.length < 5) {
                // ì„ íƒëœ ëª¨ë“œì— ë”°ë¼ ë‹¨ì–´ ë°°ì—´ ê°€ì ¸ì˜¤ê¸°
                const wordList = getWordsByMode(level);
                const word = wordList[Math.floor(Math.random() * wordList.length)];
                createWord(word);
            }

            // íŒŒì›Œì—…ì€ ì´ì œ ìƒ‰ê¹” ë‹¨ì–´ë¡œ ëŒ€ì²´ë¨
        }, spawnRate);
    }

    // ë‹¨ì–´ ìƒì„±
    function createWord(text) {
        console.log('createWord í˜¸ì¶œë¨:', text);

        const gameArea = document.getElementById('gameArea');
        if (!gameArea) {
            console.error('gameAreaë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            return;
        }

        // startWordSpawnì—ì„œ ì´ë¯¸ ì²´í¬í•˜ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ì œê±°

        const wordElement = document.createElement('div');
        wordElement.textContent = text;

        // ê²Œì„ ì˜ì—­ í¬ê¸° í™•ì¸ - ì‹¤ì œ ë Œë”ë§ëœ í¬ê¸° ê°€ì ¸ì˜¤ê¸°
        const rect = gameArea.getBoundingClientRect();
        const gameAreaWidth = rect.width || 600;
        const gameAreaHeight = rect.height || 350;

        console.log('ê²Œì„ ì˜ì—­ ì‹¤ì œ ë„ˆë¹„:', gameAreaWidth);

        // ìœ„ì—ì„œ ì‹œì‘í•´ì„œ ì•„ë˜ë¡œ ë–¨ì–´ì§€ë„ë¡ ì„¤ì • - ì „ì²´ ê°€ë¡œ ì˜ì—­ì— ê³¨ê³ ë£¨ ë¶„ë°°
        const minX = 30; // ìµœì†Œ ì—¬ë°±
        const maxX = gameAreaWidth - 180; // ë‹¨ì–´ê°€ ì˜ë¦¬ì§€ ì•Šë„ë¡ ì—¬ë°± í™•ë³´
        const startX = minX + Math.random() * (maxX - minX); // ì „ì²´ ê°€ë¡œ ì˜ì—­ì— ê³¨ê³ ë£¨
        const startY = 10; // í™”ë©´ ìœ„ì—ì„œ ì‹œì‘

        console.log('ë‹¨ì–´ ìƒì„± ìœ„ì¹˜ - X:', startX, 'ë²”ìœ„:', minX, '~', maxX);

        // íŒŒì›Œì—… íƒ€ì… ê²°ì • (15% í™•ë¥ ë¡œ íŒŒì›Œì—… ë‹¨ì–´)
        let powerUpType = null;
        let wordStyle = '';

        if (Math.random() < 0.25) { // 25% í™•ë¥ ë¡œ ì¦ê°€
            const powerUpTypes = [
                { type: 'time-freeze', name: 'ì‹œê°„ì •ì§€', color: '#87CEEB', borderColor: '#4682B4', emoji: 'â°' },
                { type: 'slow-motion', name: 'ìŠ¬ë¡œìš°ëª¨ì…˜', color: '#98FB98', borderColor: '#32CD32', emoji: 'ğŸŒ' },
                { type: 'double-score', name: 'ë”ë¸”ìŠ¤ì½”ì–´', color: '#FFD700', borderColor: '#FFA500', emoji: 'ğŸ’' },
                { type: 'shield', name: 'ì‹¤ë“œ', color: '#DDA0DD', borderColor: '#9370DB', emoji: 'ğŸ›¡ï¸' }
            ];
            powerUpType = powerUpTypes[Math.floor(Math.random() * powerUpTypes.length)];

            wordStyle = `
                    position: absolute;
                    left: ${startX}px;
                    top: ${startY}px;
                    z-index: 1000;
                    background: linear-gradient(135deg, ${powerUpType.color}, ${powerUpType.borderColor});
                    color: #000000;
                    padding: 15px 25px;
                    border: 4px solid ${powerUpType.borderColor};
                    border-radius: 25px;
                    font-size: 28px;
                    font-weight: 900;
                    font-family: 'Jua', sans-serif;
                    box-shadow: 0 8px 20px rgba(0,0,0,0.4), inset 0 2px 4px rgba(255,255,255,0.3), 0 0 25px ${powerUpType.color}AA;
                    display: block;
                    visibility: visible;
                    opacity: 1;
                    writing-mode: horizontal-tb;
                    text-orientation: mixed;
                    white-space: nowrap;
                    text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
                    letter-spacing: 2px;
                    min-width: 80px;
                    text-align: center;
                    animation: powerup-word-glow 2s infinite;
                `;

            // ë‹¨ì–´ ì•ì— íŒŒì›Œì—… ì´ëª¨ì§€ ì¶”ê°€
            wordElement.textContent = `${powerUpType.emoji} ${text}`;
            wordElement.dataset.powerUp = powerUpType.type;
            wordElement.dataset.powerUpName = powerUpType.name;
        } else {
            // ì¼ë°˜ ë‹¨ì–´ ìŠ¤íƒ€ì¼
            wordStyle = `
                    position: absolute;
                    left: ${startX}px;
                    top: ${startY}px;
                    z-index: 1000;
                    background: linear-gradient(135deg, #FFD700, #FFA500);
                    color: #000000;
                    padding: 15px 25px;
                    border: 4px solid #FF6B35;
                    border-radius: 25px;
                    font-size: 28px;
                    font-weight: 900;
                    font-family: 'Jua', sans-serif;
                    box-shadow: 0 8px 20px rgba(0,0,0,0.4), inset 0 2px 4px rgba(255,255,255,0.3);
                    display: block;
                    visibility: visible;
                    opacity: 1;
                    writing-mode: horizontal-tb;
                    text-orientation: mixed;
                    white-space: nowrap;
                    text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
                    letter-spacing: 2px;
                    min-width: 80px;
                    text-align: center;
                `;
        }

        wordElement.style.cssText = wordStyle;

        gameArea.appendChild(wordElement);

        console.log('ë‹¨ì–´ DOMì— ì¶”ê°€ë¨:', text, 'ìœ„ì¹˜ X:', startX, 'Y:', startY);
        console.log('í˜„ì¬ í™”ë©´ ë‹¨ì–´ ìˆ˜:', words.length + 1);

        words.push({
            element: wordElement,
            text: text,
            x: startX,
            y: startY,
            // ì§€ê·¸ì¬ê·¸ ì›€ì§ì„ì„ ìœ„í•œ ì¶”ê°€ ì†ì„±ë“¤ - ë”ìš± ì—­ë™ì ìœ¼ë¡œ ê°•í™”
            swayAmount: 80 + Math.random() * 120, // ì¢Œìš° í”ë“¤ë¦¼ ê°•ë„ (80-200px)ë¡œ í›¨ì”¬ ë” í¬ê²Œ
            swaySpeed: 0.015 + Math.random() * 0.025, // í”ë“¤ë¦¼ ì†ë„ (0.015-0.04)ë¡œ ë” ë‹¤ì–‘í•˜ê²Œ
            swayOffset: Math.random() * Math.PI * 2, // ì´ˆê¸° ìœ„ìƒ (ëœë¤ ì‹œì‘ì )
            // ìƒí•˜ ë¯¸ì„¸ ì›€ì§ì„ ì¶”ê°€ (ë” ìì—°ìŠ¤ëŸ¬ìš´ ë– ë‹¤ë‹ˆëŠ” ëŠë‚Œ)
            bobAmount: 3 + Math.random() * 7, // ìƒí•˜ ë¯¸ì„¸ ì›€ì§ì„ (3-10px)
            bobSpeed: 0.02 + Math.random() * 0.03, // ìƒí•˜ ì›€ì§ì„ ì†ë„
            baseX: startX // ì›ë˜ X ìœ„ì¹˜ ê¸°ì–µ
        });
    }

    // ë³´ìŠ¤ ìƒì„±
    function createBoss(level) {
        if (bossActive || !bossWords[level]) return;

        const boss = bossWords[level];
        bossActive = true;
        currentBoss = boss;
        bossHP = boss.hp;
        bossMaxHP = boss.hp;

        // ë³´ìŠ¤ëŠ” í™”ë©´ ì¤‘ì•™ ìƒë‹¨ì—ì„œ ì²œì²œíˆ ë‚´ë ¤ì˜´
        const gameArea = document.getElementById('gameArea');
        const gameAreaRect = gameArea.getBoundingClientRect();
        const startX = (gameAreaRect.width / 2) - 100; // ì¤‘ì•™ì— ìœ„ì¹˜
        const startY = -50;

        const bossElement = document.createElement('div');
        bossElement.textContent = `ğŸ‘¹ ${boss.word} ğŸ‘¹`;
        bossElement.classList.add('boss-word');

        // ë³´ìŠ¤ ìŠ¤íƒ€ì¼
        const bossStyle = `
                position: absolute;
                top: ${startY}px;
                left: ${startX}px;
                padding: 15px 25px;
                background: linear-gradient(45deg, #FF6B6B, #FF8E53, #FF6B6B);
                background-size: 200% 200%;
                animation: gradient 3s ease infinite, boss-pulse 1.5s ease-in-out infinite;
                color: white;
                font-size: 28px;
                font-weight: bold;
                border-radius: 15px;
                box-shadow: 0 0 30px #FF6B6B, 0 0 60px #FF6B6B;
                border: 3px solid #FFD93D;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
                z-index: 1000;
                min-width: 200px;
                text-align: center;
                cursor: pointer;
                user-select: none;
            `;

        bossElement.style.cssText = bossStyle;
        gameArea.appendChild(bossElement);

        // ë³´ìŠ¤ HP í‘œì‹œ
        updateBossHPDisplay();

        words.push({
            element: bossElement,
            text: boss.word,
            x: startX,
            y: startY,
            isBoss: true,
            swayAmount: 30, // ë³´ìŠ¤ëŠ” ì¡°ê¸ˆë§Œ í”ë“¤ë¦¼
            swaySpeed: 0.01,
            swayOffset: 0,
            bobAmount: 5,
            bobSpeed: 0.015,
            baseX: startX
        });

        console.log('ë³´ìŠ¤ ë“±ì¥:', boss.word, 'HP:', bossHP);

        // ë³´ìŠ¤ ë“±ì¥ ì•Œë¦¼
        showBossAlert(boss.word);
    }

    // ë³´ìŠ¤ HP í‘œì‹œ
    function updateBossHPDisplay() {
        if (!bossActive) return;

        const hpDisplay = document.getElementById('boss-hp-display') || createBossHPDisplay();
        hpDisplay.innerHTML = `
                <div style="color: #FF6B6B; font-weight: bold; font-size: 18px;">
                    ğŸ‘¹ BOSS: ${currentBoss.word} ğŸ‘¹
                </div>
                <div style="background: #333; border-radius: 10px; padding: 5px; margin: 5px 0;">
                    <div style="background: linear-gradient(90deg, #FF6B6B, #FF8E53);
                               width: ${(bossHP / bossMaxHP) * 100}%;
                               height: 20px;
                               border-radius: 5px;
                               transition: width 0.5s ease;">
                    </div>
                </div>
                <div style="color: white; font-size: 14px;">
                    HP: ${bossHP} / ${bossMaxHP}
                </div>
            `;
        hpDisplay.style.display = 'block';
    }

    // ë³´ìŠ¤ HP í‘œì‹œ ìƒì„±
    function createBossHPDisplay() {
        const hpDisplay = document.createElement('div');
        hpDisplay.id = 'boss-hp-display';
        hpDisplay.style.cssText = `
                position: absolute;
                bottom: 20px;
                right: 20px;
                background: rgba(0,0,0,0.8);
                border-radius: 10px;
                padding: 12px;
                border: 2px solid #FF6B6B;
                z-index: 1001;
                min-width: 180px;
                text-align: center;
                display: none;
            `;
        document.getElementById('gameArea').appendChild(hpDisplay);
        return hpDisplay;
    }

    // ë³´ìŠ¤ ë“±ì¥ ì•Œë¦¼
    function showBossAlert(bossName) {
        const alert = document.createElement('div');
        alert.innerHTML = `
                <div style="font-size: 36px; color: #FF6B6B; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.8);">
                    âš ï¸ ë³´ìŠ¤ ë“±ì¥! âš ï¸
                </div>
                <div style="font-size: 24px; color: white; margin-top: 10px;">
                    ${bossName}
                </div>
            `;
        alert.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.9);
                padding: 30px;
                border-radius: 20px;
                text-align: center;
                z-index: 1002;
                border: 3px solid #FF6B6B;
                animation: boss-alert 3s ease-in-out forwards;
            `;

        document.getElementById('gameArea').appendChild(alert);

        setTimeout(() => {
            alert.remove();
        }, 3000);
    }

    // í­íƒ„ íšë“
    function gainBomb() {
        if (bombCount >= maxBombs) {
            // ì´ë¯¸ ìµœëŒ€ ê°œìˆ˜
            return;
        }

        bombCount++;
        updateBombDisplay();
        showBombGainEffect();
        console.log('í­íƒ„ íšë“! í˜„ì¬:', bombCount, '/', maxBombs);
    }

    // í­íƒ„ ì‚¬ìš©
    function useBomb() {
        if (bombCount <= 0 || bombCooldown) return false;

        bombCount--;
        updateBombDisplay();

        // í™”ë©´ì˜ ëª¨ë“  ë‹¨ì–´ ì œê±°
        const wordsToRemove = [...words]; // ë°°ì—´ ë³µì‚¬
        wordsToRemove.forEach((word, index) => {
            // í­ë°œ íš¨ê³¼
            createParticles(word.element);
            word.element.classList.add('correct');

            setTimeout(() => {
                word.element.remove();
            }, 100 + index * 50); // ì—°ì‡„ í­ë°œ íš¨ê³¼
        });

        // words ë°°ì—´ ë¹„ìš°ê¸°
        words = [];

        // ë³´ìŠ¤ë„ ì œê±°
        if (bossActive) {
            bossActive = false;
            currentBoss = null;
            bossHP = 0;
            bossMaxHP = 0;
            const hpDisplay = document.getElementById('boss-hp-display');
            if (hpDisplay) hpDisplay.style.display = 'none';
        }

        // í­íƒ„ ì‚¬ìš© íš¨ê³¼
        showBombEffect();

        // ì ìˆ˜ ë³´ë„ˆìŠ¤ (í™”ë©´ì˜ ë‹¨ì–´ ê°œìˆ˜ Ã— 50ì )
        const bonusScore = wordsToRemove.length * 50;
        score += bonusScore;
        updateDisplay();

        // ì¬ì‚¬ìš© ëŒ€ê¸°ì‹œê°„ ì‹œì‘
        bombCooldown = true;
        setTimeout(() => {
            bombCooldown = false;
            updateBombDisplay(); // ëŒ€ê¸°ì‹œê°„ ì¢…ë£Œ í›„ UI ì—…ë°ì´íŠ¸
        }, bombCooldownTime);

        console.log('í­íƒ„ ì‚¬ìš©! ì œê±°ëœ ë‹¨ì–´:', wordsToRemove.length, 'ë³´ë„ˆìŠ¤:', bonusScore);
        return true;
    }

    // í­íƒ„ í‘œì‹œ ì—…ë°ì´íŠ¸
    function updateBombDisplay() {
        let bombDisplay = document.getElementById('bomb-display');
        if (!bombDisplay) {
            bombDisplay = createBombDisplay();
        }

        // í­íƒ„ ì•„ì´ì½˜ë“¤ ìƒì„±
        let bombIcons = '';
        for (let i = 0; i < maxBombs; i++) {
            if (i < bombCount) {
                bombIcons += '<span style="font-size: 24px; margin: 0 2px; filter: drop-shadow(0 0 8px #FF6B6B);">ğŸ’£</span>';
            } else {
                bombIcons += '<span style="font-size: 24px; margin: 0 2px; opacity: 0.3;">ğŸ’£</span>';
            }
        }

        let statusText = '';
        if (bombCooldown) {
            statusText = '<div style="color: #FF9999; font-size: 11px; margin-top: 3px;">ì¬ì‚¬ìš© ëŒ€ê¸°ì¤‘...</div>';
        } else if (bombCount > 0) {
            statusText = '<div style="color: #99FF99; font-size: 11px; margin-top: 3px;">ì‚¬ìš© ê°€ëŠ¥!</div>';
        } else {
            statusText = '<div style="color: #CCCCCC; font-size: 11px; margin-top: 3px;">í­íƒ„ ì—†ìŒ</div>';
        }

        bombDisplay.innerHTML = `
                <div style="color: #FF6B6B; font-weight: bold; font-size: 14px; margin-bottom: 5px;">
                    í­íƒ„ (SPACE)
                </div>
                <div>${bombIcons}</div>
                <div style="color: white; font-size: 11px; margin-top: 5px;">
                    ${bombCount} / ${maxBombs}
                </div>
                ${statusText}
            `;
    }

    // í­íƒ„ í‘œì‹œ ìƒì„±
    function createBombDisplay() {
        const bombDisplay = document.createElement('div');
        bombDisplay.id = 'bomb-display';
        bombDisplay.style.cssText = `
                position: absolute;
                bottom: 20px;
                left: 20px;
                background: rgba(0,0,0,0.8);
                border-radius: 10px;
                padding: 12px;
                border: 2px solid #FF6B6B;
                z-index: 1001;
                min-width: 100px;
                text-align: center;
            `;
        document.getElementById('gameArea').appendChild(bombDisplay);
        return bombDisplay;
    }

    // í­íƒ„ íšë“ íš¨ê³¼
    function showBombGainEffect() {
        const effect = document.createElement('div');
        effect.innerHTML = `
                <div style="font-size: 36px; margin-bottom: 10px;">ğŸ’£</div>
                <div style="font-size: 20px; color: #FF6B6B; font-weight: bold;">í­íƒ„ íšë“!</div>
                <div style="font-size: 14px; color: white; margin-top: 5px;">SPACEí‚¤ë¡œ ì‚¬ìš©</div>
            `;
        effect.style.cssText = `
                position: absolute;
                top: 30%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.9);
                padding: 20px;
                border-radius: 15px;
                text-align: center;
                z-index: 1002;
                border: 2px solid #FF6B6B;
                animation: bomb-gain 2s ease-in-out forwards;
            `;

        document.getElementById('gameArea').appendChild(effect);

        setTimeout(() => {
            effect.remove();
        }, 2000);
    }

    // í­íƒ„ ì‚¬ìš© íš¨ê³¼
    function showBombEffect() {
        const effect = document.createElement('div');
        effect.innerHTML = 'ğŸ’¥';
        effect.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 200px;
                z-index: 1002;
                animation: bomb-explosion 1s ease-out forwards;
                pointer-events: none;
            `;

        document.getElementById('gameArea').appendChild(effect);

        // í™”ë©´ í”ë“¤ë¦¼ íš¨ê³¼
        const gameArea = document.getElementById('gameArea');
        gameArea.style.animation = 'screen-shake 0.5s ease-in-out';

        setTimeout(() => {
            effect.remove();
            gameArea.style.animation = '';
        }, 1000);
    }

    // ë³´ìŠ¤ ì²˜ì¹˜ ë©”ì‹œì§€
    function showBossDefeatMessage() {
        const message = document.createElement('div');
        message.innerHTML = `
                <div style="font-size: 48px; color: #FFD93D; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.8);">
                    ğŸ‰ ë³´ìŠ¤ ì²˜ì¹˜! ğŸ‰
                </div>
                <div style="font-size: 24px; color: #FF6B6B; margin-top: 10px; text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">
                    ${currentBoss.word} ì™„ì „ ì •ë³µ!
                </div>
                <div style="font-size: 20px; color: white; margin-top: 10px;">
                    ë³´ìƒ: ${currentBoss.reward}ì  + 100ì½”ì¸!
                </div>
            `;
        message.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.9);
                padding: 40px;
                border-radius: 20px;
                text-align: center;
                z-index: 1002;
                border: 3px solid #FFD93D;
                animation: boss-alert 4s ease-in-out forwards;
            `;

        document.getElementById('gameArea').appendChild(message);

        setTimeout(() => {
            message.remove();
        }, 4000);
    }

    // ê²Œì„ ë£¨í”„
    function startGameLoop() {
        if (gameLoop) cancelAnimationFrame(gameLoop);

        function loop() {
            if (!gameRunning) return;
            if (gamePaused) {
                gameLoop = requestAnimationFrame(loop);
                return;
            }

            // íŒŒì›Œì—… ì—…ë°ì´íŠ¸
            updatePowerUps();

            // ë‹¨ì–´ ì´ë™ (ì§€ê·¸ì¬ê·¸ë¡œ ë‚˜í”Œê±°ë¦¬ë©° ë–¨ì–´ì§€ê²Œ - ë•…ì— ê°€ê¹Œì›Œì§ˆìˆ˜ë¡ ëŠë ¤ì§)
            words.forEach((word, index) => {
                // ì‹œê°„ ì •ì§€ íŒŒì›Œì—… ì²´í¬
                if (activePowerUps.timeFreeze.active) {
                    return; // ì‹œê°„ì´ ì •ì§€ëœ ìƒíƒœì—ì„œëŠ” ë‹¨ì–´ê°€ ì›€ì§ì´ì§€ ì•ŠìŒ
                }

                // ë•…ì— ê°€ê¹Œì›Œì§ˆìˆ˜ë¡ ì†ë„ ê°ì†Œ (Y ìœ„ì¹˜ì— ë”°ë¥¸ ì†ë„ ì¡°ì ˆ)
                const maxY = 280; // ë°”ë‹¥ ìœ„ì¹˜
                const slowdownFactor = Math.max(0.3, 1 - (word.y / maxY) * 0.7); // 30%ê¹Œì§€ ëŠë ¤ì§
                let currentSpeed = wordSpeed * slowdownFactor;

                // ìŠ¬ë¡œìš° ëª¨ì…˜ íŒŒì›Œì—… ì ìš©
                if (activePowerUps.slowMotion.active) {
                    currentSpeed *= 0.3; // 30% ì†ë„ë¡œ ê°ì†Œ
                }

                // Y ìœ„ì¹˜ ì—…ë°ì´íŠ¸ (ì•„ë˜ë¡œ ë–¨ì–´ì§)
                word.y += currentSpeed;

                // ì§€ê·¸ì¬ê·¸ ì›€ì§ì„ ê³„ì‚° (ì‚¬ì¸íŒŒë¥¼ ì´ìš©í•œ ì¢Œìš° í”ë“¤ë¦¼ + ìƒí•˜ ë¯¸ì„¸ ì›€ì§ì„)
                const swayX = Math.sin(word.y * word.swaySpeed + word.swayOffset) * word.swayAmount;
                const bobY = Math.sin(word.y * word.bobSpeed + word.swayOffset * 1.3) * word.bobAmount;
                let newX = word.baseX + swayX;

                // í™”ë©´ ê²½ê³„ ì²´í¬ (ë‹¨ì–´ê°€ ê²Œì„ ì˜ì—­ì„ ë²—ì–´ë‚˜ì§€ ì•Šë„ë¡) - í›¨ì”¬ í° ì›€ì§ì„ì— ë§ì¶° ì—¬ë°± ëŒ€í­ ì¡°ì •
                const gameArea = document.getElementById('gameArea');
                const gameAreaWidth = gameArea.getBoundingClientRect().width || 600;
                newX = Math.max(30, Math.min(newX, gameAreaWidth - 280)); // ì¢Œìš° ì—¬ë°±ì„ í›¨ì”¬ ë” í¬ê²Œ (200px ì›€ì§ì„ ëŒ€ì‘)

                word.x = newX;

                // DOM ìš”ì†Œ ìœ„ì¹˜ ì—…ë°ì´íŠ¸ (ìƒí•˜ ë¯¸ì„¸ ì›€ì§ì„ í¬í•¨)
                word.element.style.top = (word.y + bobY) + 'px';
                word.element.style.left = word.x + 'px';

                // ë°”ë‹¥ì— ë‹¿ì•˜ëŠ”ì§€ ì²´í¬ (ê²Œì„ ì˜ì—­ ë†’ì´ 500px - 70px ë°”ë‹¥ = 430px)
                if (word.y > 430) {
                    word.element.remove();
                    words.splice(index, 1);
                    loseLife();
                }
            });

            gameLoop = requestAnimationFrame(loop);
        }

        loop();
    }

    // ë‹¨ì–´ ì²´í¬
    function checkWord() {
        const input = document.getElementById('gameInput');
        const typedWord = input.value.trim();

        if (!typedWord) return;

        // íŒŒì›Œì—… ë‹¨ì–´ì˜ ê²½ìš° ì´ëª¨ì§€ ì œê±°í•´ì„œ ë¹„êµ
        let wordIndex = -1;
        let targetWord = null;

        for (let i = 0; i < words.length; i++) {
            const word = words[i];
            // ì¼ë°˜ ë‹¨ì–´ ë¹„êµ
            if (word.text === typedWord) {
                wordIndex = i;
                targetWord = word;
                break;
            }
            // íŒŒì›Œì—… ë‹¨ì–´ì˜ ê²½ìš° ì´ëª¨ì§€ ì œê±° í›„ ë¹„êµ
            if (word.element.dataset.powerUp) {
                const wordWithoutEmoji = word.text; // ì‹¤ì œ ë‹¨ì–´ëŠ” ì´ë¯¸ ì´ëª¨ì§€ ì—†ì´ ì €ì¥ë¨
                if (wordWithoutEmoji === typedWord) {
                    wordIndex = i;
                    targetWord = word;
                    break;
                }
            }
        }

        if (wordIndex !== -1 && targetWord) {
            // ë³´ìŠ¤ ë‹¨ì–´ì¸ì§€ í™•ì¸
            if (targetWord.isBoss && bossActive) {
                bossHP--;
                console.log('ë³´ìŠ¤ ê³µê²©! ë‚¨ì€ HP:', bossHP);

                // ë³´ìŠ¤ HP ì—…ë°ì´íŠ¸
                updateBossHPDisplay();

                // ë³´ìŠ¤ê°€ ì£½ì—ˆëŠ”ì§€ í™•ì¸
                if (bossHP <= 0) {
                    // ë³´ìŠ¤ ì²˜ì¹˜!
                    targetWord.element.classList.add('correct');
                    createParticles(targetWord.element);

                    setTimeout(() => {
                        targetWord.element.remove();
                        // ë³´ìŠ¤ HP í‘œì‹œ ìˆ¨ê¸°ê¸°
                        const hpDisplay = document.getElementById('boss-hp-display');
                        if (hpDisplay) hpDisplay.style.display = 'none';
                    }, 500);

                    words.splice(wordIndex, 1);

                    // ë³´ìŠ¤ ì²˜ì¹˜ ë³´ìƒ
                    score += currentBoss.reward;
                    coins += 100;

                    // ë³´ìŠ¤ ì²˜ì¹˜ ì‹œ í­íƒ„ íšë“ (100% í™•ë¥ )
                    gainBomb();

                    // ë³´ìŠ¤ ì²˜ì¹˜ ë©”ì‹œì§€
                    showBossDefeatMessage();

                    // ë³´ìŠ¤ ìƒíƒœ ë¦¬ì…‹
                    bossActive = false;
                    currentBoss = null;
                    bossHP = 0;
                    bossMaxHP = 0;

                    playCorrectSound();
                    updateDisplay();
                } else {
                    // ë³´ìŠ¤ ê³µê²© ì„±ê³µí•˜ì§€ë§Œ ì•„ì§ ì‚´ì•„ìˆìŒ
                    createParticles(targetWord.element);
                    playCorrectSound();
                }

                // ì…ë ¥ì°½ ì´ˆê¸°í™”
                input.value = '';
                input.blur();
                setTimeout(() => input.focus(), 100);
                return;
            }

            // íŒŒì›Œì—… ë‹¨ì–´ì¸ì§€ í™•ì¸
            if (targetWord.element.dataset.powerUp) {
                const powerUpType = targetWord.element.dataset.powerUp;
                const powerUpName = targetWord.element.dataset.powerUpName;

                // íŒŒì›Œì—… í™œì„±í™”
                activatePowerUp(powerUpType);

                // íŒŒì›Œì—… íšë“ ë©”ì‹œì§€
                showPowerUpMessage(powerUpName);
            }

            // ì •ë‹µ íš¨ê³¼
            targetWord.element.classList.add('correct');
            createParticles(targetWord.element);

            setTimeout(() => {
                targetWord.element.remove();
            }, 500);

            words.splice(wordIndex, 1);

            // ì ìˆ˜ ê³„ì‚° (ë”ë¸” ìŠ¤ì½”ì–´ íŒŒì›Œì—… ì ìš©)
            let baseScore = 100 * level;
            if (activePowerUps.doubleScore.active) {
                baseScore *= 2;
            }
            score += baseScore;
            coins += 10;
            combo++;

            if (combo > maxCombo) {
                maxCombo = combo;
            }

            // ì ìˆ˜ì— ë”°ë¥¸ ì†ë„ ì¦ê°€ë¥¼ ì™„ë§Œí•˜ê²Œ ì¡°ì •
            wordSpeed = (baseWordSpeed + (score / 2000 * 0.2)) * speedMultiplier;

            // ì½¤ë³´ í‘œì‹œ
            if (combo >= 3) {
                showCombo();
            }

            // ëœë¤ í­íƒ„ íšë“ (10% í™•ë¥ )
            if (Math.random() < 0.1) {
                gainBomb();
            }

            // ë ˆë²¨ì—… ì²´í¬ - ê° ë ˆë²¨ë§ˆë‹¤ 5ë¶„ ì •ë„ ì†Œìš”ë˜ë„ë¡ ëŒ€í­ ì¦ê°€
            const levelUpScore = level * 5000; // 5ë°° ì¦ê°€
            if (score >= levelUpScore) {
                levelUp();
            }

            playCorrectSound();
            updateDisplay();

            // ì…ë ¥ì°½ ì™„ì „íˆ ë¹„ìš°ê¸°
            input.value = '';
            input.blur();
            setTimeout(() => {
                input.focus();
            }, 100);
        } else {
            // í‹€ë ¸ì„ ë•Œ
            combo = 0;
            playWrongSound();
            input.style.animation = 'shake 0.5s';
            setTimeout(() => {
                input.style.animation = '';
            }, 500);

            // í‹€ë ¤ë„ ì…ë ¥ì°½ ë¹„ìš°ê¸°
            input.value = '';
        }
    }

    // íŒŒí‹°í´ íš¨ê³¼
    function createParticles(element) {
        const rect = element.getBoundingClientRect();
        const gameArea = document.getElementById('gameArea');
        const emojis = ['âœ¨', 'â­', 'ğŸ’«', 'ğŸ‰', 'ğŸŠ', 'ğŸ‘', 'ğŸ’¯'];

        for (let i = 0; i < 10; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.textContent = emojis[Math.floor(Math.random() * emojis.length)];
            particle.style.left = rect.left + rect.width / 2 + 'px';
            particle.style.top = rect.top + rect.height / 2 + 'px';
            particle.style.fontSize = '20px';
            document.body.appendChild(particle);

            setTimeout(() => particle.remove(), 1000);
        }
    }

    // ì½¤ë³´ í‘œì‹œ
    function showCombo() {
        const comboDisplay = document.getElementById('comboDisplay');
        comboDisplay.textContent = `${combo} COMBO! ğŸ”¥`;
        comboDisplay.classList.add('show');

        setTimeout(() => {
            comboDisplay.classList.remove('show');
        }, 2000);
    }

    // ë ˆë²¨ì—…
    function levelUp() {
        level++;
        // ë ˆë²¨ì—… ì‹œ ì¶”ê°€ ì†ë„ ì¦ê°€ë¥¼ ì™„ë§Œí•˜ê²Œ ì¡°ì •
        wordSpeed += 0.05;
        lives = Math.min(lives + 1, 9); // ìµœëŒ€ ìƒëª…ì„ 9ê°œë¡œ ë³€ê²½

        playLevelUpSound();

        // ë³´ìŠ¤ ì†Œí™˜ (5ì´ˆ í›„)
        setTimeout(() => {
            createBoss(level);
        }, 5000);

        // ë ˆë²¨ì—… ë©”ì‹œì§€
        const message = document.createElement('div');
        message.style.position = 'fixed';
        message.style.top = '50%';
        message.style.left = '50%';
        message.style.transform = 'translate(-50%, -50%)';
        message.style.fontSize = '48px';
        message.style.color = '#FFD700';
        message.style.fontWeight = 'bold';
        message.style.zIndex = '1000';
        message.textContent = `LEVEL UP! ğŸ‰`;
        document.body.appendChild(message);

        setTimeout(() => message.remove(), 2000);

        // ìºë¦­í„° ì–¸ë½
        if (level === 3) {
            unlockCharacter(2);
        } else if (level === 5) {
            unlockCharacter(3);
        }
    }

    // ìºë¦­í„° ì–¸ë½
    function unlockCharacter(index) {
        const characters = document.querySelectorAll('.character');
        if (characters[index]) {
            characters[index].classList.remove('locked');

            // ì–¸ë½ ë©”ì‹œì§€
            const message = document.createElement('div');
            message.style.position = 'fixed';
            message.style.top = '30%';
            message.style.left = '50%';
            message.style.transform = 'translate(-50%, -50%)';
            message.style.fontSize = '36px';
            message.style.color = '#4ECDC4';
            message.style.fontWeight = 'bold';
            message.style.zIndex = '1000';
            message.textContent = `ìƒˆ ìºë¦­í„° ì–¸ë½! ${characters[index].dataset.char}`;
            document.body.appendChild(message);

            setTimeout(() => message.remove(), 3000);
        }
    }

    // ìºë¦­í„° ì„ íƒ
    function selectCharacter(e) {
        if (e.target.classList.contains('locked')) return;

        document.querySelectorAll('.character').forEach(c => c.classList.remove('selected'));
        e.target.classList.add('selected');
        selectedCharacter = e.target.dataset.char;
    }

    // ìƒëª… ìƒê¸°
    function loseLife() {
        // ì‹¤ë“œ íŒŒì›Œì—… ì²´í¬
        if (activePowerUps.shield.active && activePowerUps.shield.uses > 0) {
            activePowerUps.shield.uses--;
            if (activePowerUps.shield.uses <= 0) {
                activePowerUps.shield.active = false;
            }
            updatePowerUpUI();

            // ì‹¤ë“œ íš¨ê³¼ìŒ
            playShieldSound();
            return; // ìƒëª…ì„ ìƒì§€ ì•ŠìŒ
        }

        lives--;
        combo = 0;
        playWrongSound();

        // í™”ë©´ í”ë“¤ê¸° íš¨ê³¼
        document.querySelector('.game-container').style.animation = 'shake 0.5s';
        setTimeout(() => {
            document.querySelector('.game-container').style.animation = '';
        }, 500);

        // ì„± ìƒíƒœ ì—…ë°ì´íŠ¸
        updateCastleState();

        updateDisplay();

        if (lives <= 0) {
            gameOver();
        }
    }

    // ì„± ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateCastleState() {
        const castle = document.querySelector('.castle');
        if (!castle) return;

        // ê¸°ì¡´ í´ë˜ìŠ¤ ì œê±°
        castle.classList.remove('damaged-1', 'damaged-2', 'damaged-3');

        // ëª©ìˆ¨ì— ë”°ë¼ ì„± ìƒíƒœ ë³€ê²½
        if (lives === 2) {
            castle.classList.add('damaged-1'); // ì²« ë²ˆì§¸ í”¼í•´
            createCastleDamageEffect(castle, 'light');
        } else if (lives === 1) {
            castle.classList.add('damaged-2'); // ë‘ ë²ˆì§¸ í”¼í•´
            createCastleDamageEffect(castle, 'medium');
        } else if (lives === 0) {
            castle.classList.add('damaged-3'); // ì„¸ ë²ˆì§¸ í”¼í•´ (ê²Œì„ ì˜¤ë²„)
            createCastleDamageEffect(castle, 'heavy');
        }
    }

    // ì„± íŒŒê´´ íŒŒí‹°í´ íš¨ê³¼
    function createCastleDamageEffect(castle, damageLevel) {
        const rect = castle.getBoundingClientRect();
        const gameArea = document.getElementById('gameArea');
        const gameAreaRect = gameArea.getBoundingClientRect();

        let particles = [];
        let particleCount = 0;
        let emojis = [];

        switch(damageLevel) {
            case 'light':
                particles = ['ğŸ’¨', 'ğŸª¨', 'ğŸ§±'];
                particleCount = 8;
                break;
            case 'medium':
                particles = ['ğŸ’¥', 'ğŸ”¥', 'ğŸª¨', 'ğŸ’¨', 'âš¡'];
                particleCount = 12;
                break;
            case 'heavy':
                particles = ['ğŸ”¥', 'ğŸ’€', 'ğŸ’¥', 'âš¡', 'ğŸ’¨', 'ğŸª¨'];
                particleCount = 15;
                break;
        }

        for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement('div');
            particle.className = 'castle-damage-particle';
            particle.textContent = particles[Math.floor(Math.random() * particles.length)];

            // ì„± ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒí‹°í´ ìœ„ì¹˜ ì„¤ì •
            const startX = rect.left - gameAreaRect.left + rect.width / 2 - 30 + Math.random() * 60;
            const startY = rect.top - gameAreaRect.top + rect.height / 2 - 20 + Math.random() * 40;

            particle.style.cssText = `
                    position: absolute;
                    left: ${startX}px;
                    top: ${startY}px;
                    font-size: ${15 + Math.random() * 10}px;
                    z-index: 1000;
                    pointer-events: none;
                    animation: castle-particle-${damageLevel} ${1.5 + Math.random() * 1}s ease-out forwards;
                `;

            gameArea.appendChild(particle);

            // íŒŒí‹°í´ ì œê±°
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.remove();
                }
            }, 2500);
        }
    }

    // ê²Œì„ ì˜¤ë²„
    function gameOver() {
        gameRunning = false;
        clearInterval(spawnInterval);
        cancelAnimationFrame(gameLoop);

        playGameOverSound();

        document.getElementById('gameInput').disabled = true;
        document.getElementById('finalScore').textContent = score;
        document.getElementById('finalCoins').textContent = coins;
        document.getElementById('maxCombo').textContent = maxCombo;

        saveHighScore();
        displayLeaderboard();

        document.getElementById('gameOverModal').style.display = 'flex';
    }

    // ì¼ì‹œì •ì§€ í† ê¸€
    function togglePause() {
        if (!gameRunning) return;

        gamePaused = !gamePaused;

        if (gamePaused) {
            document.getElementById('pauseModal').style.display = 'flex';
            document.getElementById('pauseBtn').textContent = 'â–¶ï¸ ê³„ì†í•˜ê¸°';
        } else {
            document.getElementById('pauseModal').style.display = 'none';
            document.getElementById('pauseBtn').textContent = 'â¸ï¸ ì¼ì‹œì •ì§€';
            document.getElementById('gameInput').focus();
        }
    }

    // ê²Œì„ ì¬ê°œ
    function resumeGame() {
        gamePaused = false;
        document.getElementById('pauseModal').style.display = 'none';
        document.getElementById('pauseBtn').textContent = 'â¸ï¸ ì¼ì‹œì •ì§€';
        document.getElementById('gameInput').focus();
    }

    // ì‚¬ìš´ë“œ í† ê¸€
    function toggleSound() {
        soundEnabled = !soundEnabled;
        const btn = document.getElementById('soundBtn');
        btn.textContent = soundEnabled ? 'ğŸ”Š ì†Œë¦¬ ON' : 'ğŸ”‡ ì†Œë¦¬ OFF';

        // ë²„íŠ¼ í´ë¦­ í›„ ì…ë ¥ì°½ìœ¼ë¡œ í¬ì»¤ìŠ¤ ë‹¤ì‹œ ì´ë™
        if (gameRunning && !gamePaused) {
            setTimeout(() => {
                document.getElementById('gameInput').focus();
            }, 100);
        }

        if (soundEnabled && !audioContext) {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            } catch (e) {
                console.log('Web Audio API not supported');
            }
        }
    }

    // ì†ë„ ì¦ê°€
    function increaseSpeed() {
        speedMultiplier = Math.min(speedMultiplier + 0.2, 3.0);
        updateSpeedDisplay();
        if (gameRunning) {
            wordSpeed = (baseWordSpeed + (score / 1000 * 0.5)) * speedMultiplier;
        }

        // ë²„íŠ¼ í´ë¦­ í›„ ì…ë ¥ì°½ìœ¼ë¡œ í¬ì»¤ìŠ¤ ë‹¤ì‹œ ì´ë™
        if (gameRunning && !gamePaused) {
            setTimeout(() => {
                document.getElementById('gameInput').focus();
            }, 100);
        }
    }

    // ì†ë„ ê°ì†Œ
    function decreaseSpeed() {
        speedMultiplier = Math.max(speedMultiplier - 0.2, 0.4);
        updateSpeedDisplay();
        if (gameRunning) {
            wordSpeed = (baseWordSpeed + (score / 1000 * 0.5)) * speedMultiplier;
        }

        // ë²„íŠ¼ í´ë¦­ í›„ ì…ë ¥ì°½ìœ¼ë¡œ í¬ì»¤ìŠ¤ ë‹¤ì‹œ ì´ë™
        if (gameRunning && !gamePaused) {
            setTimeout(() => {
                document.getElementById('gameInput').focus();
            }, 100);
        }
    }

    // ì†ë„ í‘œì‹œ ì—…ë°ì´íŠ¸
    function updateSpeedDisplay() {
        document.getElementById('speedDisplay').textContent = speedMultiplier.toFixed(1) + 'x';
    }

    // ë””ìŠ¤í”Œë ˆì´ ì—…ë°ì´íŠ¸
    function updateDisplay() {
        document.getElementById('score').textContent = score;
        document.getElementById('level').textContent = level;
        document.getElementById('lives').textContent = 'â¤ï¸'.repeat(lives);
        document.getElementById('coins').textContent = coins;
        document.getElementById('combo').textContent = combo;

        // ì†ë„ í‘œì‹œ (ê¸°ë³¸ ì†ë„ ëŒ€ë¹„ ë°°ìˆ˜ë¡œ í‘œì‹œ)
        const speedMultiplier = (wordSpeed / baseWordSpeed).toFixed(1);
        document.getElementById('speed').textContent = speedMultiplier + 'x';
    }

    // ìµœê³  ì ìˆ˜ ì €ì¥
    function saveHighScore() {
        const highScores = JSON.parse(localStorage.getItem('typingHighScores') || '[]');
        const playerName = prompt('ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”!') || 'ìµëª…';

        highScores.push({
            name: playerName,
            score: score,
            level: level,
            date: new Date().toLocaleDateString()
        });

        highScores.sort((a, b) => b.score - a.score);
        highScores.splice(10); // ìƒìœ„ 10ê°œë§Œ ì €ì¥

        localStorage.setItem('typingHighScores', JSON.stringify(highScores));
    }

    // ìµœê³  ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°
    function loadHighScores() {
        const highScores = JSON.parse(localStorage.getItem('typingHighScores') || '[]');
        return highScores;
    }

    // ë¦¬ë”ë³´ë“œ í‘œì‹œ
    function displayLeaderboard() {
        const highScores = loadHighScores();
        const leaderboardList = document.getElementById('leaderboardList');
        leaderboardList.innerHTML = '';

        highScores.slice(0, 5).forEach((score, index) => {
            const item = document.createElement('div');
            item.className = 'leaderboard-item';

            const medal = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : 'ğŸ…';

            item.innerHTML = `
                    <span>${medal} ${score.name}</span>
                    <span>${score.score}ì </span>
                `;

            leaderboardList.appendChild(item);
        });
    }

    // ë‹¨ì–´/ë¬¸ì¥ ì„ íƒ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    function setupWordTypeSelection() {
        const wordTypeRadios = document.querySelectorAll('input[name="wordType"]');
        wordTypeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                // ê²Œì„ì´ ì‹¤í–‰ ì¤‘ì´ë©´ ì…ë ¥ì°½ìœ¼ë¡œ í¬ì»¤ìŠ¤ ë‹¤ì‹œ ì´ë™
                if (gameRunning && !gamePaused) {
                    setTimeout(() => {
                        document.getElementById('gameInput').focus();
                    }, 100);
                }
            });
        });
    }

    // í˜„ì¬ ì„ íƒëœ ëª¨ë“œì— ë”°ë¼ ë‹¨ì–´ ë°°ì—´ ë°˜í™˜
    function getWordsByMode(targetLevel) {
        const selectedMode = document.querySelector('input[name="wordType"]:checked').value;

        if (selectedMode === 'sentences') {
            // ë¬¸ì¥ ìœ„ì£¼: ë ˆë²¨ 4-5ì˜ ê¸´ ë¬¸ì¥ë“¤ë§Œ ì‚¬ìš©
            return [...(wordLists[4] || []), ...(wordLists[5] || [])];
        } else {
            // ë‹¨ì–´ ìœ„ì£¼: í•´ë‹¹ ë ˆë²¨ì˜ ë‹¨ì–´ë“¤ ì‚¬ìš© (ë ˆë²¨ 1-3)
            const level = Math.min(targetLevel, 3); // ìµœëŒ€ ë ˆë²¨ 3ê¹Œì§€ë§Œ
            return wordLists[level] || wordLists[1]; // wordListsëŠ” 1ë¶€í„° ì‹œì‘
        }
    }

    // í”ë“¤ê¸° ì• ë‹ˆë©”ì´ì…˜
    const style = document.createElement('style');
    style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-10px); }
                75% { transform: translateX(10px); }
            }

            @keyframes boss-pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.05); }
            }

            @keyframes boss-alert {
                0% { opacity: 0; transform: translate(-50%, -50%) scale(0.3); }
                20% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
                80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            }

            @keyframes bomb-gain {
                0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
                20% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
                80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            }

            @keyframes bomb-explosion {
                0% { opacity: 1; transform: translate(-50%, -50%) scale(0.5) rotate(0deg); }
                50% { opacity: 1; transform: translate(-50%, -50%) scale(1.5) rotate(180deg); }
                100% { opacity: 0; transform: translate(-50%, -50%) scale(2) rotate(360deg); }
            }

            @keyframes screen-shake {
                0%, 100% { transform: translateX(0) translateY(0); }
                10% { transform: translateX(-10px) translateY(-5px); }
                20% { transform: translateX(10px) translateY(5px); }
                30% { transform: translateX(-8px) translateY(-3px); }
                40% { transform: translateX(8px) translateY(3px); }
                50% { transform: translateX(-6px) translateY(-2px); }
                60% { transform: translateX(6px) translateY(2px); }
                70% { transform: translateX(-4px) translateY(-1px); }
                80% { transform: translateX(4px) translateY(1px); }
                90% { transform: translateX(-2px) translateY(0px); }
            }
        `;
    document.head.appendChild(style);

    // íŒŒì›Œì—… ìƒì„±
    function createPowerUp() {
        if (powerUps.length >= 3) return; // ìµœëŒ€ 3ê°œê¹Œì§€ë§Œ

        const gameArea = document.getElementById('gameArea');
        const rect = gameArea.getBoundingClientRect();

        const types = [
            { type: 'time-freeze', emoji: 'â°', name: 'ì‹œê°„ì •ì§€' },
            { type: 'slow-motion', emoji: 'ğŸŒ', name: 'ìŠ¬ë¡œìš°ëª¨ì…˜' },
            { type: 'double-score', emoji: 'ğŸ’', name: 'ë”ë¸”ìŠ¤ì½”ì–´' },
            { type: 'shield', emoji: 'ğŸ›¡ï¸', name: 'ì‹¤ë“œ' }
        ];

        const powerUpType = types[Math.floor(Math.random() * types.length)];

        const powerUp = document.createElement('div');
        powerUp.className = `powerup ${powerUpType.type}`;
        powerUp.textContent = powerUpType.emoji;
        powerUp.dataset.type = powerUpType.type;
        powerUp.dataset.name = powerUpType.name;

        // ëœë¤ ìœ„ì¹˜ì— ìƒì„±
        const x = 50 + Math.random() * (rect.width - 100);
        const y = 50 + Math.random() * (rect.height - 150);

        powerUp.style.left = x + 'px';
        powerUp.style.top = y + 'px';

        powerUp.addEventListener('click', () => {
            activatePowerUp(powerUpType.type);
            powerUp.remove();
            powerUps = powerUps.filter(p => p !== powerUp);
        });

        gameArea.appendChild(powerUp);
        powerUps.push(powerUp);

        // 10ì´ˆ í›„ ìë™ ì œê±°
        setTimeout(() => {
            if (powerUp.parentNode) {
                powerUp.remove();
                powerUps = powerUps.filter(p => p !== powerUp);
            }
        }, 10000);
    }

    // íŒŒì›Œì—… í™œì„±í™”
    function activatePowerUp(type) {
        playPowerUpSound();

        switch(type) {
            case 'time-freeze':
                activePowerUps.timeFreeze.active = true;
                activePowerUps.timeFreeze.duration = 6000; // 6ì´ˆë¡œ 2ë°° ì¦ê°€
                createScreenEffect('time-freeze');
                break;
            case 'slow-motion':
                activePowerUps.slowMotion.active = true;
                activePowerUps.slowMotion.duration = 20000; // 20ì´ˆë¡œ 4ë°° ì¦ê°€
                createScreenEffect('slow-motion');
                break;
            case 'double-score':
                activePowerUps.doubleScore.active = true;
                activePowerUps.doubleScore.duration = 10000; // 10ì´ˆ
                createScreenEffect('double-score');
                break;
            case 'shield':
                activePowerUps.shield.active = true;
                activePowerUps.shield.uses = 1;
                break;
        }

        updatePowerUpUI();
    }

    // í™”ë©´ íš¨ê³¼ ìƒì„±
    function createScreenEffect(type) {
        const effect = document.createElement('div');
        effect.className = `screen-effect ${type}`;
        document.body.appendChild(effect);

        const duration = type === 'time-freeze' ? 6000 : type === 'slow-motion' ? 20000 : 10000;

        setTimeout(() => {
            if (effect.parentNode) {
                effect.remove();
            }
        }, duration);
    }

    // íŒŒì›Œì—… UI ì—…ë°ì´íŠ¸
    function updatePowerUpUI() {
        const container = document.getElementById('activePowerUps');
        container.innerHTML = '';

        if (activePowerUps.timeFreeze.active) {
            const ui = document.createElement('div');
            ui.className = 'active-powerup';
            ui.innerHTML = `â° ì‹œê°„ì •ì§€ ${(activePowerUps.timeFreeze.duration / 1000).toFixed(1)}ì´ˆ`;
            container.appendChild(ui);
        }

        if (activePowerUps.slowMotion.active) {
            const ui = document.createElement('div');
            ui.className = 'active-powerup';
            ui.innerHTML = `ğŸŒ ìŠ¬ë¡œìš° ${(activePowerUps.slowMotion.duration / 1000).toFixed(1)}ì´ˆ`;
            container.appendChild(ui);
        }

        if (activePowerUps.doubleScore.active) {
            const ui = document.createElement('div');
            ui.className = 'active-powerup';
            ui.innerHTML = `ğŸ’ ë”ë¸”ìŠ¤ì½”ì–´ ${(activePowerUps.doubleScore.duration / 1000).toFixed(1)}ì´ˆ`;
            container.appendChild(ui);
        }

        if (activePowerUps.shield.active) {
            const ui = document.createElement('div');
            ui.className = 'active-powerup';
            ui.innerHTML = `ğŸ›¡ï¸ ì‹¤ë“œ ${activePowerUps.shield.uses}íšŒ`;
            container.appendChild(ui);
        }
    }

    // íŒŒì›Œì—… ì—…ë°ì´íŠ¸ (ê²Œì„ ë£¨í”„ì—ì„œ í˜¸ì¶œ)
    function updatePowerUps() {
        let needsUpdate = false;

        if (activePowerUps.timeFreeze.active) {
            activePowerUps.timeFreeze.duration -= 16; // ~60fps ê¸°ì¤€
            if (activePowerUps.timeFreeze.duration <= 0) {
                activePowerUps.timeFreeze.active = false;
                needsUpdate = true;
            }
        }

        if (activePowerUps.slowMotion.active) {
            activePowerUps.slowMotion.duration -= 16;
            if (activePowerUps.slowMotion.duration <= 0) {
                activePowerUps.slowMotion.active = false;
                needsUpdate = true;
            }
        }

        if (activePowerUps.doubleScore.active) {
            activePowerUps.doubleScore.duration -= 16;
            if (activePowerUps.doubleScore.duration <= 0) {
                activePowerUps.doubleScore.active = false;
                needsUpdate = true;
            }
        }

        if (needsUpdate) {
            updatePowerUpUI();
        }
    }

    // íŒŒì›Œì—… ì‚¬ìš´ë“œ
    function playPowerUpSound() {
        if (!soundEnabled || !audioContext) return;

        // íŒŒì›Œì—… íšë“ ì‚¬ìš´ë“œ (ìƒìŠ¹í•˜ëŠ” íŠ¸ë¦´)
        const notes = [523.25, 659.25, 783.99, 1046.50]; // C5-E5-G5-C6
        notes.forEach((freq, index) => {
            setTimeout(() => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                oscillator.type = 'triangle';

                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.2);
            }, index * 50);
        });
    }

    // ì‹¤ë“œ ì‚¬ìš´ë“œ
    function playShieldSound() {
        if (!soundEnabled || !audioContext) return;

        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
        oscillator.type = 'triangle';

        gainNode.gain.setValueAtTime(0, audioContext.currentTime);
        gainNode.gain.linearRampToValueAtTime(0.4, audioContext.currentTime + 0.05);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);

        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 0.3);
    }

    // íŒŒì›Œì—… íšë“ ë©”ì‹œì§€ í‘œì‹œ
    function showPowerUpMessage(powerUpName) {
        const message = document.createElement('div');
        message.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #4CAF50, #45a049);
                color: white;
                padding: 20px 30px;
                border-radius: 15px;
                font-size: 24px;
                font-weight: bold;
                box-shadow: 0 8px 32px rgba(0,0,0,0.3);
                z-index: 10000;
                animation: powerup-message 2s ease-out forwards;
                text-align: center;
                border: 3px solid #fff;
            `;
        message.innerHTML = `ğŸ‰ ${powerUpName} íšë“! ğŸ‰`;

        document.body.appendChild(message);

        setTimeout(() => {
            if (message.parentNode) {
                message.remove();
            }
        }, 2000);
    }

    // ê²Œì„ ì´ˆê¸°í™”
    init();
    updateSpeedDisplay();
    setupWordTypeSelection();
</script>
</body>
</html>