<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>우주 타자 - 기본 연습</title>

    <style>
        :root{
            --bg:#f6f7fb;
            --panel:#ffffff;
            --text:#111827;
            --muted:#6b7280;
            --border:#e5e7eb;
            --shadow: 0 16px 50px rgba(17,24,39,.10);
            --radius:18px;

            --brand:#2563eb;

            --good:#16a34a;
            --bad:#ef4444;

            --soft:#fbfbfd;
            --chip:#f3f4f6;
        }

        *{ box-sizing:border-box; }
        html,body{ height:100%; }
        body{
            margin:0;
            font-family: ui-sans-serif, system-ui, -apple-system, "Apple SD Gothic Neo", "Malgun Gothic", Segoe UI, Roboto, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            overflow-x:hidden;
        }

        /* ===== Background (white + subtle space) ===== */
        .starfield, .gradient-bg{
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 0;
        }
        .gradient-bg{
            background:
                    radial-gradient(900px 520px at 15% 15%, rgba(37,99,235,.12), transparent 60%),
                    radial-gradient(900px 520px at 85% 25%, rgba(96,165,250,.10), transparent 60%),
                    radial-gradient(900px 520px at 40% 90%, rgba(245,158,11,.10), transparent 60%);
            opacity: .95;
        }
        .starfield{
            background:
                    radial-gradient(circle at 10% 20%, rgba(17,24,39,.10) 0 1.5px, transparent 2px) 0 0/160px 160px,
                    radial-gradient(circle at 70% 30%, rgba(37,99,235,.12) 0 1.5px, transparent 2px) 0 0/220px 220px,
                    radial-gradient(circle at 40% 80%, rgba(17,24,39,.08) 0 1.5px, transparent 2px) 0 0/260px 260px;
            opacity: .8;
            filter: blur(.1px);
        }

        /* ===== Layout ===== */
        .container{
            position: relative;
            z-index: 1;
            width: min(920px, 100%);
            margin: 0 auto;
            padding: 18px 16px 28px;
            min-height: 100vh;
            display:flex;
            flex-direction: column;
            gap: 14px;
        }

        .nav-buttons{ display:flex; justify-content:flex-start; }
        .back-btn{
            border: 1px solid var(--border);
            background:#fff;
            color: var(--text);
            border-radius: 999px;
            padding: 10px 12px;
            font-weight: 900;
            cursor:pointer;
            box-shadow: 0 10px 26px rgba(17,24,39,.06);
            transition: background .15s ease, transform .05s ease;
        }
        .back-btn:hover{ background:#f9fafb; }
        .back-btn:active{ transform: translateY(1px); }

        .text-center{ text-align:center; }
        .my-md{ margin: 6px 0 8px; }

        .logo{
            margin: 6px 0 4px;
            font-size: 22px;
            letter-spacing: 1.6px;
            font-weight: 900;
        }
        .tagline{
            margin:0;
            color: var(--muted);
            font-size: 13px;
            font-weight: 800;
        }

        /* ===== Stats bar ===== */
        .stats-bar{
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 14px;
            display:grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .stat-box{
            background: var(--soft);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 12px;
            text-align:center;
        }
        .stat-value{
            font-weight: 900;
            font-size: 18px;
            letter-spacing: -0.4px;
        }
        .stat-label{
            margin-top: 4px;
            font-size: 12px;
            color: var(--muted);
            font-weight: 800;
        }

        /* ===== Typing container ===== */
        .typing-container{
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 16px;
        }

        .typing-display{
            border: 1px solid var(--border);
            border-radius: 18px;
            background: var(--soft);
            padding: 14px;
        }

        .current-word{
            font-weight: 900;
            font-size: 18px;
            letter-spacing: -0.3px;
            margin-bottom: 10px;
        }

        .feedback-area{
            display:flex;
            flex-wrap:wrap;
            gap: 6px;
            padding-top: 2px;
        }

        .typing-character{
            display:inline-flex;
            align-items:center;
            justify-content:center;
            min-width: 34px;
            padding: 10px 10px;
            border-radius: 14px;
            font-weight: 900;
            background: #fff;
            border: 1px solid var(--border);
            box-shadow: 0 10px 20px rgba(17,24,39,.06);
            user-select:none;
        }
        .typing-untyped{
            background:#fff;
            color: #374151;
            opacity: .75;
        }
        .typing-correct{
            background: rgba(22,163,74,.10);
            border-color: rgba(22,163,74,.20);
            color: #14532d;
            opacity: 1;
        }
        .typing-incorrect{
            background: rgba(239,68,68,.10);
            border-color: rgba(239,68,68,.22);
            color: #7f1d1d;
            opacity: 1;
        }

        .instructions{
            margin: 12px 2px 10px;
            color: var(--muted);
            font-weight: 800;
            font-size: 13px;
            line-height: 1.5;
        }

        /* ===== Input ===== */
        .input-container{ margin-top: 8px; }
        .typing-input{
            width: 100%;
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 14px;
            font-size: 16px;
            outline:none;
            background:#fff;
            transition: box-shadow .15s ease, border-color .15s ease, transform .05s ease;
        }
        .typing-input:focus{
            border-color: rgba(37,99,235,.55);
            box-shadow: 0 0 0 4px rgba(37,99,235,.12);
        }
        .typing-input:disabled{
            background:#f3f4f6;
            color:#9ca3af;
            cursor:not-allowed;
        }

        /* ===== Difficulty ===== */
        .difficulty-selector{
            margin-top: 12px;
            display:flex;
            gap: 10px;
            justify-content:center;
            flex-wrap:wrap;
        }
        .difficulty-btn{
            border: 1px solid var(--border);
            background:#fff;
            color: var(--text);
            border-radius: 999px;
            padding: 10px 12px;
            font-weight: 900;
            cursor:pointer;
            transition: background .15s ease, transform .05s ease, border-color .15s ease;
        }
        .difficulty-btn:hover{ background:#f9fafb; }
        .difficulty-btn:active{ transform: translateY(1px); }
        .difficulty-btn.active{
            border-color: rgba(37,99,235,.35);
            background: rgba(37,99,235,.08);
            color: #1d4ed8;
        }

        /* ===== Controls ===== */
        .controls{
            margin-top: 12px;
            display:flex;
            gap: 10px;
            justify-content:center;
            flex-wrap:wrap;
        }
        .btn{
            border: 1px solid transparent;
            border-radius: 16px;
            padding: 12px 14px;
            font-weight: 900;
            cursor:pointer;
            font-size: 14px;
            min-width: 120px;
            transition: transform .05s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease;
            user-select:none;
        }
        .btn:active{ transform: translateY(1px); }
        .btn:disabled{ opacity:.55; cursor:not-allowed; box-shadow:none !important; }

        .btn-primary{
            background: var(--brand);
            color:#fff;
            box-shadow: 0 12px 28px rgba(37,99,235,.22);
        }
        .btn-primary:hover{ background:#1d4ed8; }

        .btn-outline{
            background:#fff;
            color: var(--text);
            border-color: var(--border);
        }
        .btn-outline:hover{ background:#f9fafb; }

        @media (max-width: 520px){
            .stats-bar{ grid-template-columns: 1fr; }
            .btn{ width:100%; min-width:0; }
            .typing-character{ min-width: 30px; padding: 9px 9px; }
        }
    </style>
</head>

<body>
<div class="starfield"></div>
<div class="gradient-bg"></div>

<div class="container" style="min-height: 100vh;">
    <div class="nav-buttons">
        <button class="back-btn" onclick="window.location.href='index.html'">← 메인으로</button>
    </div>

    <div class="text-center my-md">
        <h1 class="logo">BASIC TYPING</h1>
        <p class="tagline">기본 타자 연습</p>
    </div>

    <div class="stats-bar">
        <div class="stat-box">
            <div class="stat-value" id="accuracy">100<span style="font-size: 1rem;">%</span></div>
            <div class="stat-label">정확도</div>
        </div>
        <div class="stat-box">
            <div class="stat-value" id="cpm">0</div>
            <div class="stat-label">CPM</div>
        </div>
        <div class="stat-box">
            <div class="stat-value" id="words">0</div>
            <div class="stat-label">단어</div>
        </div>
    </div>

    <div class="typing-container">
        <div class="typing-display">
            <div class="current-word" id="target-word">시작 버튼을 눌러 연습을 시작하세요</div>
            <div class="feedback-area" id="feedback-area"></div>
        </div>

        <p class="instructions">위의 단어를 입력하세요. 정확하게 입력하면 다음 단어로 자동 이동합니다.</p>

        <div class="input-container">
            <input
                    type="text"
                    id="typing-input"
                    class="typing-input"
                    placeholder="여기에 타이핑하세요"
                    disabled
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                    spellcheck="false"
            />
        </div>

        <div class="difficulty-selector">
            <button class="difficulty-btn active" data-difficulty="easy">초급</button>
            <button class="difficulty-btn" data-difficulty="medium">중급</button>
            <button class="difficulty-btn" data-difficulty="hard">고급</button>
        </div>

        <div class="controls">
            <button class="btn btn-primary" id="start-btn">시작</button>
            <button class="btn btn-outline" id="reset-btn" disabled>초기화</button>
        </div>
    </div>
</div>

<script>
    // DOM
    const targetWordElement = document.getElementById('target-word');
    const feedbackArea = document.getElementById('feedback-area');
    const typingInput = document.getElementById('typing-input');
    const accuracyElement = document.getElementById('accuracy');
    const cpmElement = document.getElementById('cpm');
    const wordsElement = document.getElementById('words');
    const startButton = document.getElementById('start-btn');
    const resetButton = document.getElementById('reset-btn');
    const difficultyButtons = document.querySelectorAll('.difficulty-btn');

    // State
    let isPlaying = false;
    let currentWord = '';
    let wordCount = 0;
    let correctChars = 0;
    let totalChars = 0;
    let startTime = null;
    let currentDifficulty = 'easy';

    const wordLists = {
        easy: [
            '우주','별','행성','달','지구','태양','빛','밤','낮','하늘',
            '별자리','은하','무중력','로켓','탐사','발사','궤도','착륙',
            '기지','우주인','신호','탐험','관측','망원경','별똥별','혜성',
            '유성','항해','성운','중력','우주복','위성','발견','연구'
        ],
        medium: [
            '우주선','천문학','블랙홀','인공위성','우주정거장','초신성','외계인',
            '소행성','왜성','중성자별','퀘이사','초기우주','빅뱅','암흑물질',
            '암흑에너지','성간물질','엑소플래닛','행성간','적색거성','백색왜성',
            '은하단','은하군','천체물리','광년','우주망원경','중력파','성단',
            '성운형성','태양풍','태양계','케플러','우주비행사','착륙선'
        ],
        hard: [
            '외계문명탐사','상대성이론','양자중력이론','초끈이론','천체관측소',
            '우주개발프로젝트','달착륙미션','화성이주계획','중력보정장치',
            '항성진화모델','우주식민지건설','행성간이동기술','블랙홀증발현상',
            '중성미자관측기','중력렌즈효과','우주배경복사','은하형성과정',
            '초대질량블랙홀','우주공간탐사선','외계행성대기분석','행성지질구조',
            '태양계외행성','인공지능우주탐사','극초신성폭발','초고에너지우주선',
            '행성간통신시스템','인류문명지속가능성','우주관측프로젝트'
        ]
    };

    // Events
    startButton.addEventListener('click', startGame);
    resetButton.addEventListener('click', resetGame);
    typingInput.addEventListener('input', handleInput);

    difficultyButtons.forEach(btn => {
        btn.addEventListener('click', function(){
            if (this.classList.contains('active')) return;

            difficultyButtons.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            currentDifficulty = this.dataset.difficulty;

            if (isPlaying){
                resetGame();
                startGame();
            } else {
                // 게임 전이면 목표 단어만 갱신(선택감)
                targetWordElement.textContent = '시작 버튼을 눌러 연습을 시작하세요';
                feedbackArea.innerHTML = '';
            }
        });
    });

    function startGame(){
        isPlaying = true;
        wordCount = 0;
        correctChars = 0;
        totalChars = 0;
        startTime = Date.now();

        // UI
        setAccuracy(100);
        cpmElement.textContent = '0';
        wordsElement.textContent = '0';

        startButton.disabled = true;
        resetButton.disabled = false;
        typingInput.disabled = false;
        typingInput.value = '';
        typingInput.focus();

        showNewWord();
    }

    function showNewWord(){
        const list = wordLists[currentDifficulty];
        currentWord = list[Math.floor(Math.random() * list.length)];

        targetWordElement.textContent = currentWord;
        feedbackArea.innerHTML = '';

        currentWord.split('').forEach(ch => {
            const span = document.createElement('span');
            span.textContent = ch;
            span.className = 'typing-character typing-untyped';
            feedbackArea.appendChild(span);
        });

        typingInput.value = '';
        typingInput.focus();
    }

    function handleInput(){
        if (!isPlaying) return;

        const typed = typingInput.value;
        const feedbackChars = feedbackArea.querySelectorAll('.typing-character');

        for (let i = 0; i < currentWord.length; i++){
            if (i < typed.length){
                feedbackChars[i].className =
                    (typed[i] === currentWord[i])
                        ? 'typing-character typing-correct'
                        : 'typing-character typing-incorrect';
            } else {
                feedbackChars[i].className = 'typing-character typing-untyped';
            }
        }

        if (typed.length === currentWord.length){
            if (typed === currentWord){
                wordCount++;
                correctChars += currentWord.length;
                totalChars += currentWord.length;
                wordsElement.textContent = String(wordCount);
                updateStats();
                setTimeout(showNewWord, 240);
            } else {
                // 부분 정답도 정확도에 반영
                let correctCount = 0;
                for (let i = 0; i < currentWord.length; i++){
                    if (typed[i] === currentWord[i]) correctCount++;
                }
                correctChars += correctCount;
                totalChars += currentWord.length;
                updateStats();
                // 오타는 사용자가 수정하도록 입력값 유지
            }
        } else {
            // 타이핑 중에도 CPM 실시간 갱신(원하면 제거 가능)
            updateStats(false);
        }
    }

    function updateStats(updateAccuracy = true){
        const elapsedMinutes = (Date.now() - startTime) / 1000 / 60;
        if (elapsedMinutes > 0){
            const cpm = Math.round(correctChars / elapsedMinutes);
            cpmElement.textContent = String(cpm);
        }

        if (updateAccuracy){
            const acc = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;
            setAccuracy(acc);
        }
    }

    function setAccuracy(value){
        accuracyElement.textContent = `${value}%`;
    }

    function resetGame(){
        isPlaying = false;

        targetWordElement.textContent = '시작 버튼을 눌러 연습을 시작하세요';
        feedbackArea.innerHTML = '';
        typingInput.value = '';
        typingInput.disabled = true;

        startButton.disabled = false;
        resetButton.disabled = true;

        setAccuracy(100);
        cpmElement.textContent = '0';
        wordsElement.textContent = '0';
    }
</script>
</body>
</html>
